/*
 The buffer module from node.js, for the browser.

 @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 @license  MIT
*/
function Ob(a,b,c,d){for(var e,f,h=c+2;h<=d;h+=2){e=b[h],f=b[h+1];for(var g=h-2;g>=c&&a[e]<a[b[g]];g-=2)b[g+2]=b[g],b[g+3]=b[g+1];b[g+2]=e,b[g+3]=f}}function Pb(a,b,c,d){for(var h,g,e=c,f=d;e<d;){for(h=a[b[c+d>>2<<1]];e<=f;){for(;a[b[e]]<h;)e+=2;for(;a[b[f]]>h;)f-=2;e<=f&&(g=b[e],b[e]=b[f],b[f]=g,g=b[e+1],b[e+1]=b[f+1],b[f+1]=g,e+=2,f-=2)}if(40>f-c?Ob(a,b,c,f):Pb(a,b,c,f),40>d-e){Ob(a,b,e,d);break}c=e,f=d}}function Rb(a,b,c,d,e,f){return a-=d,b-=e,c-=f,Math.sqrt(a*a+b*b+c*c)}function z(a,b,c,d){return(a-=c)*a+(b-=d)*b}function Sb(a,b,c,d){return a-=c,b-=d,Math.sqrt(a*a+b*b)}function Tb(a,b,c,d,e,f){return(a-=d)*a+(b-=e)*b+(c-=f)*c}function Ub(a){for(var b=2*Math.PI;0>a;)a+=b;for(;a>=b;)a-=b;return a}function Vb(a,b,c,d){var e=Math.PI/180;return a*=e,c*=e,b*=e,d*=e,Math.atan2(Math.sin(c-a)*Math.cos(d),Math.cos(b)*Math.sin(d)-Math.sin(b)*Math.cos(d)*Math.cos(c-a))}function Wb(a,b,c){a*=Qb,b*=Qb;var d=Math.cos(b);c[0]=Math.cos(a)*d*6378137,c[1]=Math.sin(a)*d*6378137,c[2]=6378137*Math.sin(b)}function Xb(a,b,c,d){return a=c-a,c=d-b,b=Math.sin(c/2)*Math.sin(c/2)+Math.cos(b)*Math.cos(d)*Math.sin(a/2)*Math.sin(a/2),2*Math.atan2(Math.sqrt(b),Math.sqrt(1-b))}function Yb(a,b,c,d){var e=Math.PI/180;return 6378137*Xb(a*e,b*e,c*e,d*e)}function Zb(a,b,c,d,e,f){return(a=a*d-a*f+c*f-c*b+e*b-e*d)*a}function $b(a,b,c){return 0!==c&&(a>=b+c?a=b:b>=a+c||(a-=(b=a+c-b)*b/c*.25)),0>a&&(a=0),a}function ac(a,b,c,d,e,f){var h=z(c,d,e,f),g=((a-c)*(e-c)+(b-d)*(f-d))/h;return 0===h?z(a,b,c,d):(0>g&&(g=0),1<g&&(g=1),z(a,b,c+g*(e-c),d+g*(f-d)))}function ec(){dc=!0;for(var a=0;64>a;++a)F[a]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[a],I["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charCodeAt(a)]=a;I[45]=62,I[95]=63}function fc(a){dc||ec();for(var b=a.length,c=b%3,d="",e=[],f=0,h=b-c;f<h;f+=16383){for(var n,g=e,l=g.push,p=a,r=f+16383>h?h:f+16383,u=[],t=f;t<r;t+=3)n=(p[t]<<16)+(p[t+1]<<8)+p[t+2],u.push(F[n>>18&63]+F[n>>12&63]+F[n>>6&63]+F[63&n]);n=u.join(""),l.call(g,n)}return 1===c?(a=a[b-1],d+=F[a>>2],d+=F[a<<4&63],d+="=="):2===c&&(a=(a[b-2]<<8)+a[b-1],d+=F[a>>10],d+=F[a>>4&63],d+=F[a<<2&63],d+="="),e.push(d),e.join("")}function gc(a,b,c,d,e){var f=8*e-d-1,h=(1<<f)-1,g=h>>1,l=-7,n=c?-1:1,p=a[b+(e=c?e-1:0)];for(e+=n,c=p&(1<<-l)-1,p>>=-l,l+=f;0<l;c=256*c+a[b+e],e+=n,l-=8);for(f=c&(1<<-l)-1,c>>=-l,l+=d;0<l;f=256*f+a[b+e],e+=n,l-=8);if(0===c)c=1-g;else{if(c===h)return f?NaN:1/0*(p?-1:1);f+=Math.pow(2,d),c-=g}return(p?-1:1)*f*Math.pow(2,c-d)}function hc(a,b,c,d,e,f){var h,g=8*f-e-1,l=(1<<g)-1,n=l>>1,p=23===e?Math.pow(2,-24)-Math.pow(2,-77):0;f=d?0:f-1;var r=d?1:-1,u=0>b||0===b&&0>1/b?1:0;for(b=Math.abs(b),isNaN(b)||1/0===b?(b=isNaN(b)?1:0,d=l):(d=Math.floor(Math.log(b)/Math.LN2),1>b*(h=Math.pow(2,-d))&&(d--,h*=2),2<=(b=1<=d+n?b+p/h:b+p*Math.pow(2,1-n))*h&&(d++,h/=2),d+n>=l?(b=0,d=l):1<=d+n?(b=(b*h-1)*Math.pow(2,e),d+=n):(b=b*Math.pow(2,n-1)*Math.pow(2,e),d=0));8<=e;a[c+f]=255&b,f+=r,b/=256,e-=8);for(d=d<<e|b,g+=e;0<g;a[c+f]=255&d,f+=r,d/=256,g-=8);a[c+f-r]|=128*u}function kc(a,b){if((J.TYPED_ARRAY_SUPPORT?2147483647:1073741823)<b)throw new RangeError("Invalid typed array length");return J.TYPED_ARRAY_SUPPORT?(a=new Uint8Array(b)).__proto__=J.prototype:(null===a&&(a=new J(b)),a.length=b),a}function J(a,b,c){if(!(J.TYPED_ARRAY_SUPPORT||this instanceof J))return new J(a,b,c);if("number"==typeof a){if("string"==typeof b)throw Error("If encoding is specified then the first argument must be a string");return lc(this,a)}return mc(this,a,b,c)}function mc(a,b,c,d){if("number"==typeof b)throw new TypeError('"value" argument must not be a number');if("undefined"!=typeof ArrayBuffer&&b instanceof ArrayBuffer){if(b.byteLength,0>c||b.byteLength<c)throw new RangeError("'offset' is out of bounds");if(b.byteLength<c+(d||0))throw new RangeError("'length' is out of bounds");return b=void 0===c&&void 0===d?new Uint8Array(b):void 0===d?new Uint8Array(b,c):new Uint8Array(b,c,d),J.TYPED_ARRAY_SUPPORT?(a=b).__proto__=J.prototype:a=nc(a,b),a}if("string"==typeof b){if(d=a,"string"==typeof(a=c)&&""!==a||(a="utf8"),!J.isEncoding(a))throw new TypeError('"encoding" must be a valid string encoding');return(b=(d=kc(d,c=0|oc(b,a))).write(b,a))!==c&&(d=d.slice(0,b)),d}return function pc(a,b){if(M(b)){var c=0|rc(b.length);return 0===(a=kc(a,c)).length||b.copy(a,0,0,c),a}if(b){if("undefined"!=typeof ArrayBuffer&&b.buffer instanceof ArrayBuffer||"length"in b)return(c="number"!=typeof b.length)||(c=(c=b.length)!=c),c?kc(a,0):nc(a,b);if("Buffer"===b.type&&jc(b.data))return nc(a,b.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(a,b)}function qc(a){if("number"!=typeof a)throw new TypeError('"size" argument must be a number');if(0>a)throw new RangeError('"size" argument must not be negative')}function lc(a,b){if(qc(b),a=kc(a,0>b?0:0|rc(b)),!J.TYPED_ARRAY_SUPPORT)for(var c=0;c<b;++c)a[c]=0;return a}function nc(a,b){var c=0>b.length?0:0|rc(b.length);a=kc(a,c);for(var d=0;d<c;d+=1)a[d]=255&b[d];return a}function rc(a){if(a>=(J.TYPED_ARRAY_SUPPORT?2147483647:1073741823))throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+(J.TYPED_ARRAY_SUPPORT?2147483647:1073741823).toString(16)+" bytes");return 0|a}function M(a){return!(null==a||!a._isBuffer)}function oc(a,b){if(M(a))return a.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(a)||a instanceof ArrayBuffer))return a.byteLength;"string"!=typeof a&&(a=""+a);var c=a.length;if(0===c)return 0;for(var d=!1;;)switch(b){case"ascii":case"latin1":case"binary":return c;case"utf8":case"utf-8":case void 0:return tc(a).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*c;case"hex":return c>>>1;case"base64":return uc(a).length;default:if(d)return tc(a).length;b=(""+b).toLowerCase(),d=!0}}function vc(a,b,c){var d=!1;if((void 0===b||0>b)&&(b=0),b>this.length)return"";if((void 0===c||c>this.length)&&(c=this.length),0>=c)return"";if((c>>>=0)<=(b>>>=0))return"";for(a||(a="utf8");;)switch(a){case"hex":for(a=b,b=c,c=this.length,(!a||0>a)&&(a=0),(!b||0>b||b>c)&&(b=c),d="",c=a;c<b;++c)d=(a=d)+(d=16>(d=this[c])?"0"+d.toString(16):d.toString(16));return d;case"utf8":case"utf-8":return wc(this,b,c);case"ascii":for(a="",c=Math.min(this.length,c);b<c;++b)a+=String.fromCharCode(127&this[b]);return a;case"latin1":case"binary":for(a="",c=Math.min(this.length,c);b<c;++b)a+=String.fromCharCode(this[b]);return a;case"base64":return 0===b&&c===this.length?fc(this):fc(this.slice(b,c));case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":for(b=this.slice(b,c),c="",a=0;a<b.length;a+=2)c+=String.fromCharCode(b[a]+256*b[a+1]);return c;default:if(d)throw new TypeError("Unknown encoding: "+a);a=(a+"").toLowerCase(),d=!0}}function xc(a,b,c){var d=a[b];a[b]=a[c],a[c]=d}function yc(a,b,c,d,e){if(0===a.length)return-1;if("string"==typeof c?(d=c,c=0):2147483647<c?c=2147483647:-2147483648>c&&(c=-2147483648),c=+c,isNaN(c)&&(c=e?0:a.length-1),0>c&&(c=a.length+c),c>=a.length){if(e)return-1;c=a.length-1}else if(0>c){if(!e)return-1;c=0}if("string"==typeof b&&(b=J.from(b,d)),M(b))return 0===b.length?-1:zc(a,b,c,d,e);if("number"==typeof b)return b&=255,J.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?e?Uint8Array.prototype.indexOf.call(a,b,c):Uint8Array.prototype.lastIndexOf.call(a,b,c):zc(a,[b],c,d,e);throw new TypeError("val must be string, number or Buffer")}function zc(a,b,c,d,e){function f(n,p){return 1===h?n[p]:n.readUInt16BE(p*h)}var h=1,g=a.length,l=b.length;if(void 0!==d&&("ucs2"===(d=String(d).toLowerCase())||"ucs-2"===d||"utf16le"===d||"utf-16le"===d)){if(2>a.length||2>b.length)return-1;h=2,g/=2,l/=2,c/=2}if(e)for(d=-1;c<g;c++)if(f(a,c)===f(b,-1===d?0:c-d)){if(-1===d&&(d=c),c-d+1===l)return d*h}else-1!==d&&(c-=c-d),d=-1;else for(c+l>g&&(c=g-l);0<=c;c--){for(g=!0,d=0;d<l;d++)if(f(a,c+d)!==f(b,d)){g=!1;break}if(g)return c}return-1}function wc(a,b,c){c=Math.min(a.length,c);for(var d=[];b<c;){var e=a[b],f=null,h=239<e?4:223<e?3:191<e?2:1;if(b+h<=c)switch(h){case 1:128>e&&(f=e);break;case 2:var g=a[b+1];128==(192&g)&&127<(e=(31&e)<<6|63&g)&&(f=e);break;case 3:g=a[b+1];var l=a[b+2];128==(192&g)&&128==(192&l)&&2047<(e=(15&e)<<12|(63&g)<<6|63&l)&&(55296>e||57343<e)&&(f=e);break;case 4:g=a[b+1],l=a[b+2];var n=a[b+3];128==(192&g)&&128==(192&l)&&128==(192&n)&&65535<(e=(15&e)<<18|(63&g)<<12|(63&l)<<6|63&n)&&1114112>e&&(f=e)}null===f?(f=65533,h=1):65535<f&&(f-=65536,d.push(f>>>10&1023|55296),f=56320|1023&f),d.push(f),b+=h}if((a=d.length)<=Cc)d=String.fromCharCode.apply(String,d);else{for(c="",b=0;b<a;)c+=String.fromCharCode.apply(String,d.slice(b,b+=Cc));d=c}return d}function O(a,b,c){if(0!=a%1||0>a)throw new RangeError("offset is not uint");if(a+b>c)throw new RangeError("Trying to access beyond buffer length")}function P(a,b,c,d,e,f){if(!M(a))throw new TypeError('"buffer" argument must be a Buffer instance');if(b>e||b<f)throw new RangeError('"value" argument is out of bounds');if(c+d>a.length)throw new RangeError("Index out of range")}function Dc(a,b,c,d){0>b&&(b=65535+b+1);for(var e=0,f=Math.min(a.length-c,2);e<f;++e)a[c+e]=(b&255<<8*(d?e:1-e))>>>8*(d?e:1-e)}function Ec(a,b,c,d){0>b&&(b=4294967295+b+1);for(var e=0,f=Math.min(a.length-c,4);e<f;++e)a[c+e]=b>>>8*(d?e:3-e)&255}function Fc(a,b,c,d){if(c+d>a.length)throw new RangeError("Index out of range");if(0>c)throw new RangeError("Index out of range")}function tc(a,b){b=b||1/0;for(var c,d=a.length,e=null,f=[],h=0;h<d;++h){if(55295<(c=a.charCodeAt(h))&&57344>c){if(!e){if(56319<c){-1<(b-=3)&&f.push(239,191,189);continue}if(h+1===d){-1<(b-=3)&&f.push(239,191,189);continue}e=c;continue}if(56320>c){-1<(b-=3)&&f.push(239,191,189),e=c;continue}c=65536+(e-55296<<10|c-56320)}else e&&-1<(b-=3)&&f.push(239,191,189);if(e=null,128>c){if(0>--b)break;f.push(c)}else if(2048>c){if(0>(b-=2))break;f.push(c>>6|192,63&c|128)}else if(65536>c){if(0>(b-=3))break;f.push(c>>12|224,c>>6&63|128,63&c|128)}else{if(!(1114112>c))throw Error("Invalid code point");if(0>(b-=4))break;f.push(c>>18|240,c>>12&63|128,c>>6&63|128,63&c|128)}}return f}function Bc(a){for(var b=[],c=0;c<a.length;++c)b.push(255&a.charCodeAt(c));return b}function uc(a){if(2>(a=(a.trim?a.trim():a.replace(/^\s+|\s+$/g,"")).replace(Gc,"")).length)a="";else for(;0!=a.length%4;)a+="=";dc||ec();var b=a.length;if(0<b%4)throw Error("Invalid string. Length must be a multiple of 4");var c="="===a[b-2]?2:"="===a[b-1]?1:0,d=new cc(3*b/4-c),e=0<c?b-4:b,f=0;for(b=0;b<e;b+=4){var h=I[a.charCodeAt(b)]<<18|I[a.charCodeAt(b+1)]<<12|I[a.charCodeAt(b+2)]<<6|I[a.charCodeAt(b+3)];d[f++]=h>>16&255,d[f++]=h>>8&255,d[f++]=255&h}return 2===c?(h=I[a.charCodeAt(b)]<<2|I[a.charCodeAt(b+1)]>>4,d[f++]=255&h):1===c&&(h=I[a.charCodeAt(b)]<<10|I[a.charCodeAt(b+1)]<<4|I[a.charCodeAt(b+2)]>>2,d[f++]=h>>8&255,d[f++]=255&h),d}function Ac(a,b,c,d){for(var e=0;e<d&&!(e+c>=b.length||e>=a.length);++e)b[e+c]=a[e];return e}function Hc(a){return!!a.constructor&&"function"==typeof a.constructor.isBuffer&&a.constructor.isBuffer(a)}function Jc(){var a=w.toArray(arguments).join(" ");throw Error(a)}function Kc(){throw new Lc(w.toArray(arguments).join(" "))}function Mc(){}function Q(){Jc.apply(null,w.toArray(arguments))}function R(){Kc.apply(null,w.toArray(arguments))}function Nc(){var a=Mc.apply,b=w.toArray(arguments),c=Ic.current_command;c&&"help"!=c&&b.unshift("["+c+"]"),a.call(Mc,null,b)}function Oc(){(Ic.VERBOSE||Ic.verbose)&&Nc.apply(null,arguments)}function Lc(a){return(a=Error(a)).name="UserError",a}function ca(a){return(a||"__id_")+ ++Pc}function da(a){return"function"==typeof a}function ea(a){return a===Object(a)}function fa(a,b,c){return a<b?b:a>c?c:a}function ha(a){return Array.isArray(a)}function ia(a){return null!=a&&a.constructor==Number}function ja(a){return ia(a)&&!isNaN(a)}function ka(a){return ja(a)&&1/0!==a&&-1/0!==a}function ma(a){return ia(a)&&0<=a}function na(a){return ia(a)&&(0|a)===a}function oa(a){return null!=a&&a.toString===String.prototype.toString}function pa(a){return!!a&&a.getTime===Date.prototype.getTime}function qa(a){return!0===a||!1===a}function ra(a){return pa(a)?a.toISOString().replace(":00.000Z","Z"):""}function sa(a){ta(a)||Q("toArray() requires an array-like object");try{var b=Array.prototype.slice.call(a,0)}catch(e){b=[];for(var c=0,d=a.length;c<d;c++)b[c]=a[c]}return b}function ta(a){return!!a&&(!!ha(a)||!oa(a)&&(0===a.length||0<a.length))}function ua(a){return(a+"").replace(/[\\"']/g,"\\$&").replace(/\u0000/g,"\\0")}function va(a){return a.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}function wa(a){return String(a).replace(/[&<>"'\/]/g,(function(b){return Qc[b]}))}function xa(a){for(var b=1,c=arguments.length;b<c;b++){var e,d=arguments[b]||{};for(e in d)0==e in a&&d.hasOwnProperty(e)&&(a[e]=d[e])}return a}function ya(a){var d,e,b=a||{},c=arguments.length;for(e=1;e<c;e++){var f=arguments[e]||{};for(d in f)f.hasOwnProperty(d)&&(b[d]=f[d])}return b}function za(a,b){function c(){this.__super__==c&&(this.__super__=b.prototype.__super__,b.apply(this,arguments),delete this.__super__)}c.prototype=b.prototype||b,a.prototype=ya(new c,a.prototype),a.prototype.constructor=a,a.prototype.__super__=c}function Aa(a,b,c,d){var f="undefined"==typeof setImmediate?setTimeout:setImmediate,h=0;!function e(g,l){if(g)return d(g,null);f((function(){0==h<a.length?d(null,l):c(l,a[h++],e)}),0)}(null,b)}function Ba(a,b){ha(a)&&ha(b)||Q("Usage: merge(destArray, srcArray);");for(var c=0,d=b.length;c<d;c++)a.push(b[c]);return a}function Ca(a,b){var c=Ta(b);return a.filter((function(d){return!Object.prototype.hasOwnProperty.call(c,d)}))}function Da(a,b){return a.filter((function(c){return b.includes(c)}))}function Ea(a,b){for(var c=b!=b,d=0,e=a.length||0;d<e;d++)if(a[d]===b||c&&a[d]!=a[d])return d;return-1}function Fa(a,b){return oa(a)?-1!=a.indexOf(b):ta(a)?-1!=Ea(a,b):void Q("Expected Array or String argument")}function Ga(a,b){return a.reduce((function(c,d){return c||b(d)}),!1)}function Ha(a,b){return a.reduce((function(c,d){return c&&b(d)}),!0)}function Ia(a,b,c){return 0===(a=a.filter(b,c)).length?null:a[0]}function Ka(a,b,c){var d=[];for(b=void 0===b?0:b,c=void 0===c?1:c;a--;)d.push(b),b+=c;return d}function La(a,b){for(var d,c=[],e=0;e<a;e++)void 0!==(d=b(e))&&(c[e]=d);return 0<c.length?c:void 0}function Ma(a,b){ta(a)||Q("sum() expects an array, received:",a);for(var e,c=0,d=0,f=0,h=a.length;f<h;f++)(e=a[f])?c+=e:isNaN(e)&&d++;return b&&(b.nan=d),c}function Na(a){for(var e,b=1/0,c=-1/0,d=0,f=0,h=a.length;f<h;f++)(e=a[f])!=e&&d++,e<b&&(b=e),e>c&&(c=e);return{min:b,max:c,nan:d}}function Oa(a){for(var d,b=new Set,c=[],e=0,f=a.length;e<f;e++)d=a[e],b.has(d)||(c.push(d),b.add(d));return c}function Pa(a,b){return a.map((function(c){return c[b]}))}function Qa(a){return a.reduce((function(b,c){return b[c]=c in b?b[c]+1:1,b}),{})}function Ra(a,b){return a.reduce((function(c,d){return c[d[b]]=d,c}),{})}function Sa(a,b){return a.reduce((function(c,d){var e=d[b];return e in c?c[e].push(d):c[e]=[d],c}),{})}function Ta(a,b){var c=1<arguments.length;return a.reduce((function(d,e){return d[e]=!c||b,d}),{})}function Ua(a,b,c){if(!ta(a))throw Error("#forEach() takes an array-like argument. "+a);for(var d=0,e=a.length;d<e;d++)b.call(c,a[d],d)}function Va(a,b,c){Object.keys(a).forEach((function(d){b.call(c,a[d],d)}))}function Wa(a,b){for(var c=0,d=a.length;c<d;c++)a[c]=b;return a}function Xa(a,b){a.splice(0,a.length);for(var c=0,d=b.length;c<d;c++)a.push(b[c])}function Ya(a,b){for(var c="",d=0;d<b;d++)c+=a;return c}function Za(a){return 1!=a?"s":""}function $a(a,b){return-1!==a.indexOf(b,a.length-b.length)}function ab(a,b,c){return Ya(c||" ",b-(a=String(a)).length)+a}function bb(a,b,c){return(a=String(a))+Ya(c||" ",b-a.length)}function cb(a){return db(eb(a))}function db(a){return a.replace(Rc,"")}function eb(a){return a.replace(Sc,"")}function fb(a){var b="",c="-"==a[0]?1:0,d=a.indexOf("."),e=a.length;for(d=(-1==d?e:d)-3;d>c;)b=","+a.substring(d,e)+b,e=d,d-=3;return a.substring(0,e)+b}function gb(a,b){return 0<=b?a.toFixed(b):String(a)}function hb(a,b,c,d){return isNaN(a)?a=c||"-":(a=fb(a=gb(a,b)),d&&0<parseFloat(a)&&(a="+"+a)),a}function ib(a){var b;for(b=a.length-1;0<b;b--){var c=Math.floor(Math.random()*(b+1)),d=a[b];a[b]=a[c],a[c]=d}}function jb(a){for(var b=[],c=1;c<arguments.length;c+=2)b.push(ob(arguments[c],arguments[c+1]));return a.sort((function(d,e){for(var f=0,h=0,g=b.length;h<g&&0===f;)f=b[h](d,e),h++;return f})),a}function kb(a,b){return b=pb(b),Array.prototype.sort.call(a,b),a}function lb(a,b){var c=Ka(a.length);return mb(c,a,b),c}function mb(a,b,c){var d=pb(c);a.sort((function(e,f){var h=d(b[e],b[f]);return 0<h||0===h&&e>f?1:-1}))}function nb(a,b){for(var c=b.length,d=[],e=0;e<c;e++){var f=b[e];(0>f||f>=c)&&Q("Out-of-bounds array idx"),d[e]=a[f]}Xa(a,d)}function ob(a,b){var c=pb(b);return function(d,e){return c(d[a],e[a])}}function pb(a){return a=!1!==a,function(b,c){var d=0;return null==c?d=null==b?0:-1:null==b?d=1:b<c?d=a?-1:1:b>c?d=a?1:-1:b!=b?d=1:c!=c&&(d=-1),d}}function qb(a,b){return rb(a,0,a.length-1),!1===b&&Array.prototype.reverse.call(a),a}function rb(a,b,c){for(var f,h,d=b,e=c;d<c;){for(f=a[b+c>>1];d<=e;){for(;a[d]<f;)d++;for(;a[e]>f;)e--;d<=e&&(h=a[d],a[d]=a[e],a[e]=h,d++,e--)}b<e&&rb(a,b,e),b=d,e=c}}function sb(a,b){if(isNaN(b))return a.length;for(var c=1,d=0,e=a.length;d<e;d++)b>a[d]&&c++;return c}function tb(a,b){return ub(a,Math.ceil((1-b)*a.length))}function ub(a,b){(!a.length||1>b||b>a.length)&&Q("[findValueByRank()] invalid input"),b=fa(0|b,1,a.length),--b;for(var e,f,h,g,c=0,d=a.length-1;c<d;){h=a[b],e=c,f=d;do{for(;a[e]<h;)e++;for(;h<a[f];)f--;e<=f&&(g=a[e],a[e]=a[f],a[f]=g,e++,f--)}while(e<=f);f<b&&(c=e),b<e&&(d=f)}return a[b]}function vb(a){var b=a.length,c=Math.floor(b/2)+1,d=ub(a,c);return 0==(1&b)&&(d=(d+ub(a,c-1))/2),d}function wb(a){for(var d,b=0,c=NaN,e=0,f=a.length;e<f;e++)d=a[e],isNaN(d)||(c=1==++b?d:d/b+(b-1)/b*c);return c}function xb(a){return yb(a).apply(null,Array.prototype.slice.call(arguments,1))}function yb(a){for(var b=/%([',+0]*)([1-9]?)((?:\.[1-9])?)([sdifxX%])/g,c=[],d=[],e=0,f="",h=b.exec(a);h;)e=a.substring(e,b.lastIndex-h[0].length),"%%"==h[0]?f+=e+"%":(c.push(f+e),f="",d.push(h)),e=b.lastIndex,h=b.exec(a);return c.push(f+a.substr(e)),function(){var g=c[0],l=arguments.length;l!=d.length&&Q("[format()] Data does not match format string; format:",a,"data:",arguments);for(var n=0;n<l;n++){var p=void 0,r=void 0,u=void 0,t=arguments[n],x=d[n],A=x[1],y=x[2],k=x[3]?parseInt(x[3].substr(1)):void 0,m=x[4],q="s"==m,v="x"==m||"X"==m,B="d"==m||"i"==m,C=!q;x="";var D=0,E=!1;q?u=String(t):v?(u=t.toString(16),"X"==m&&(u=u.toUpperCase())):C&&("-"==(u=gb(t,B?0:k))[0]&&(E=!0,u=u.substr(1)),t=0==parseFloat(u),-1==A.indexOf("'")&&-1==A.indexOf(",")||(u=fb(u)),t||(E?x="−":-1!=A.indexOf("+")&&(x="+"))),y&&(t=u.length+x.length)<(y=parseInt(y,10))&&(D=y-t,p=Ya(r=-1==A.indexOf("0")?" ":"0",D)),g+=(u=0==D?x+u:"0"==r?x+p+u:p+x+u)+c[n+1]}return g}}function zb(a){return a=a.split("*").map((function(b){return va(b)})).join(".*"),new RegExp("^"+a+"$")}function Ab(a,b){return na(a)?J.allocUnsafe?J.allocUnsafe(a):new J(a):J.from&&J.allocUnsafe?J.from(a,b):new J(a,b)}function Bb(a,b){var e,c=0,d=1<=b?b:1.2;return function(f){return f>c&&(c=Math.ceil(f*d),e=a?new a(c):Ab(c)),e}}function Cb(a,b,c,d,e,f){a===c&&d>b&&Q("copy error");var h=1,g=0;for(f&&(h=-1,g=e-1),f=0;f<e;f++,g+=h)c[f+d]=a[b+g]}function Db(a,b,c){return c=c||a.length,b=new a.constructor(Math.max(a.length,b)),Cb(a,0,b,0,c),b}function Eb(a,b){var c;return a&&b&&(c=Fb(a,b).replace(/[-_]$/,"")),c||""}function Fb(a,b){for(var c=0,d=a.length;c<d&&a[c]===b[c];c++);return a.substr(0,c)}function Gb(a){var b=0<(a=String(a)).indexOf("%")?Number(a.replace("%",""))/100:Number(a);return 0<=b&&1>=b||R(xb("Invalid percentage: %s",a)),b}function Hb(a,b){return b=String(b),/[0-9]$/.test(a)&&(b="-"+b),a+b}function Ib(a,b){var c=Qa(a),d=b||Hb,e=[];return a.forEach((function(f){for(var l,h=0,g=f;-1<e.indexOf(g)||g==f&&1<c[g]||g!=f&&0<c[g];){if(h++,!(l=d(f,h))||l==g)throw Error("Naming error");g=l}e.push(g)})),e}function Jb(a){return a||""}function Kb(a){return Tc(a,Mb)}function Lb(a){return Tc(a,Uc)}function Tc(a,b){return b=(a=String(a).trim())?Number(b(a)):NaN,isNaN(b)?null:b}function Mb(a){return 0<a.indexOf(",")?a.replace(/,([0-9]{3})/g,"$1"):a}function Uc(a){return(a=a.replace(/[ .]([0-9]{3})/g,"$1")).replace(",",".")}function Nb(a){var b=a.length;if(2<=b){var c=a.charAt(0),d=a.charAt(b-1);if('"'==c&&'"'==d&&!a.includes('","')||"'"==c&&"'"==d&&!a.includes("','"))return a.substr(1,b-2)}return a}function Vc(){this.mx=this.my=1,this.bx=this.by=0}function U(){0<arguments.length&&this.setBounds.apply(this,arguments)}function Wc(a,b,c,d){return Xc(a,b,c,d).distance}function Xc(a,b,c,d){var e,f,h,g;if(c=d.getShapeIter(c),d=1/0,c.hasNext())var l=e=h=c.x,n=f=g=c.y;for(;c.hasNext();){var p=c.x,r=c.y,u=ac(a,b,l,n,p,r);u<d&&(d=u,e=l,f=n,h=p,g=r),l=p,n=r}return 1/0==d?{distance:1/0}:{segment:[[e,f],[h,g]],distance:Math.sqrt(d)}}function Yc(a,b){if(!(a=b.getShapeIter(a)).hasNext())return null;b=a.x;for(var c=a.y,d=0,e=0,f=0;a.hasNext();)d++,e+=a.x,f+=a.y;return 0!==d&&a.x===b&&a.y===c||(e+=b,f+=c,d++),{x:e/d,y:f/d}}function Zc(a,b){var c=0;return(a||[]).reduce((function(d,e){var f=b.getSimpleShapeBounds(e).area();return f>c&&(c=f,d=e),d}),null)}function bd(a,b){var h,g,c=b.getShapeIter(a),d=0,e=0,f=0;if(!c.hasNext())return null;var l=g=0,n=-c.x;for(h=-c.y;c.hasNext();){var p=g,r=l;g=c.x+n;var u=p*(l=c.y+h)-r*g;d+=u,e+=u*(p+g),f+=u*(r+l)}return 0==(c=d/2)?Yc(a,b):{x:e/(6*c)-n,y:f/(6*c)-h}}function dd(a){return 0<=a?a:~a}function fd(a,b){var c=new U;return gd(a,(function(d){b.mergeArcBounds(d,c)})),c}function hd(a,b,c,d){var e=0,f=-1;if(c>d){var h=c;c=d,d=h}for(h=c+1;h<d;h++)(c=a[h])<b&&c>e&&(f=h,e=c);return f}function gd(a,b){for(var c,d=0;d<a.length;d++)(c=a[d])instanceof Array?gd(c,b):w.isInteger(c)?void 0!==(c=b(c))&&(a[d]=c):c&&Q("Non-integer arc id in:",a)}function kd(a,b,c,d){var e=!1,f=!1;return function id(a,b,c){for(var d=0,e=a.length;d<e;d++)b.forEachArcSegment(a[d],c)}(c,d,(function(h,g,l,n){1==(h=ld(a,b,l[h],n[h],l[g],n[g]))?e=!e:isNaN(h)&&(f=!0)})),f?-1:e?1:0}function ld(a,b,c,d,e,f){return(a=md(a,b,c,d,e,f))!=a?NaN:-1/0==a?0:1}function md(a,b,c,d,e,f){var h=-1/0;return a<c&&a<e||a>c&&a>e||b>d&&b>f||(a===c||a===e?a===c&&a===e?b!=d&&b!=f&&b>d==b>f||(h=NaN):a===c?b===d?h=NaN:e<c&&b<d&&(h=d):b===f?h=NaN:c<e&&b<f&&(h=f):(a=d+(a-c)*(f-d)/(e-c))>b?h=a:a==b&&(h=NaN)),h}function nd(a,b){return(b.isPlanar()?od:pd)(a,b)}function pd(a,b){return qd(a=b.getShapeIter(a))}function qd(a){for(var e,f,h,g,b=0,c=!1,d=Math.PI/180;a.hasNext();)e=a.x*d,f=Math.sin(a.y*d),c?b+=(e-h)*(2+f+g):c=!0,h=e,g=f;return b/2*40680631590769}function od(a,b){var c,d;if(a=b.getShapeIter(a),b=0,a.hasNext()){var e=c=0,f=-a.x;for(d=-a.y;a.hasNext();){var h=c,g=e;b+=(c=a.x+f)*g-h*(e=a.y+d)}}return b/2}function rd(a,b){return(b.isPlanar()?sd:td)(a,b)}function sd(a,b){return $c(a,b,!1)}function td(a,b){return $c(a,b,!0)}function vd(a,b){var c=function ed(a){var b=0;return a=a.forEachSegment((function(c,d,e,f){e=e[c]-e[d],c=f[c]-f[d],b+=Math.sqrt(e*e+c*c)})),b/a||0}(a),d=.0025*c;0<b&&(d=b,Nc(w.format("Applying snapping threshold of %s -- %.6f times avg. segment length",b,b/c))),b=d;var e=0;if(c=a.getVertexData(),0<b){var f=c.xx,h=f.length;d=new Uint32Array(h);for(var g=0;g<h;g++)d[g]=g;for(wd(f,d,0,d.length-1),f=0,h=d.length;f<h;f++){for(var l,n,p=b,r=d,u=c.xx,t=c.yy,x=f,A=r.length,y=u[r[f]],k=t[r[f]],m=0;++x<A&&!((l=u[n=r[x]]-y)>p);)g=t[n]-k,0===l&&0===g||l*l+g*g>p*p||(u[n]=y,t[n]=k,m++);e+=m}}0<(b=e)&&a.dedupCoords(),Nc(w.format("Snapped %s point%s",b,w.pluralSuffix(b)))}function wd(a,b,c,d){if(24<d-c){for(var g,e=a[b[c+d>>1]],f=c,h=d;f<=h;){for(;a[b[f]]<e;)f++;for(;a[b[h]]>e;)h--;f<=h&&(g=b[f],b[f]=b[h],b[h]=g,f++,h--)}h>c&&wd(a,b,c,h),f<d&&wd(a,b,f,d)}else for(h=c+1;h<=d;h++){for(e=b[h],f=h-1;f>=c&&a[e]<a[b[f]];f--)b[f+1]=b[f];b[f+1]=e}}function xd(a,b,c,d,e,f,h,g){ac(c,d,e,f,h,g)>b||(e=z(e,f,c,d),h=z(h,g,c,d),e<=b||h<=b||a.push(c,d))}function yd(a,b,c,d,e,f){return(c=Sb(c,d,e,f))<b&&(b=c,a[0]=e,a[1]=f),b}function zd(a,b,c){return(b<c?a<b||a>c:b>c?a>b||a<c:a!=b)&&(a=Math.abs(a-b)<Math.abs(a-c)?b:c),a}function Ad(a,b,c,d,e,f){return(a-e)*(d-f)-(b-f)*(c-e)}function Bd(a,b,c,d,e,f,h,g){return 0>=Ad(a,b,c,d,e,f)*Ad(a,b,c,d,h,g)&&0>=Ad(e,f,h,g,a,b)*Ad(e,f,h,g,c,d)}function Dd(a){return[-180+(a=w.isFiniteNumber(a)?a:1e-10),-90+a,180-a,90-a]}function Ed(a){var b=Dd(-1);return a=a instanceof U?a.toArray():a,V.containsBounds(b,a)}function Hd(a,b){b=w.extend({},b);var e=a.getBounds();!a.isPlanar()&&V.containsBounds(Dd(),e.toArray());var f=e.ymin,h=e.ymax-f,g=b.stripes||function Id(a){return a=a.getFilteredPointCount()-a.size(),0<(a=Math.ceil(Math.pow(10*a,.6)/40))?a:1}(a),l=new Uint32Array(g),n=1<g&&0<h?function c(y){return Math.floor((g-1)*(y-f)/h)}:function d(){return 0};0==0<=b.tolerance&&(b.tolerance=1e-14*Math.max.apply(null,e.toArray().map(Math.abs))),a.forEachSegment((function(y,k,m,q){for(y=n(q[y]),k=n(q[k]);l[y]+=2,y!=k;)y+=k>y?1:-1}));var p=function Gd(a){var b=4*a;return(!Fd||Fd.byteLength<b)&&(Fd=new ArrayBuffer(b)),new Uint32Array(Fd,0,a)}(w.sum(l)),r=0,u=[];w.forEach(l,(function(y){var k=r;r+=y,u.push(p.subarray(k,r))})),w.initializeArray(l,0),a.forEachSegment((function(y,k,m,q){m=n(q[y]),q=n(q[k]);for(var v,B;v=l[m],l[m]=v+2,(B=u[m])[v]=y,B[v+1]=k,m!=q;)m+=q>m?1:-1}));var t=a.getVertexData(),x=[];for(a=0;a<g;a++){var A=Jd(u[a],t.xx,t.yy,b);for(e=0;e<A.length;e++)x.push(A[e])}return function Kd(a,b){var c={},d=b||Md;return a.filter((function(e){return!((e=d(e))in c)&&(c[e]=!0)}))}(x,b.unique?Ld:null)}function Md(a){return a.a.join(",")+";"+a.b.join(",")}function Ld(a){return a.x+","+a.y}function Jd(a,b,c,d){var h,g,l,e=a.length-2,f=[];d=(d||{}).tolerance;var n=0;for(h=a.length;n<h;n+=2)if(b[a[n]]>b[a[n+1]]){var p=n+1,r=a[n];a[n]=a[p],a[p]=r}for(Pb(b,a,0,a.length-2),g=0;g<e;){n=a[g],h=a[g+1],p=b[n],r=b[h];var u=c[n],t=c[h];for(l=g;l<e;){var x=a[l+=2],A=b[x];if(r<A)break;var y=c[x],k=a[l+1],m=b[k],q=c[k];if(u>=y){if(u>q&&t>y&&t>q)continue}else if(u<q&&t<y&&t<q)continue;n!=x&&n!=k&&h!=x&&h!=k&&(A=V.segmentIntersection(p,u,r,t,A,y,m,q,d))&&(m=[n,h],x=[x,k],f.push(Nd(A,m,x,b,c)),4==A.length&&f.push(Nd(A.slice(2),m,x,b,c)))}g+=2}return f}function Nd(a,b,c,d,e){var f=a[0];return b=Od(f,a=a[1],b[0],b[1],d,e),c=Od(f,a,c[0],c[1],d,e),{x:f,y:a,a:d=b[0]<c[0]?b:c,b:d==b?c:b}}function Od(a,b,c,d,e,f){return e[c]==a&&f[c]==b?[c,c]:e[d]==a&&f[d]==b?[d,d]:c<d?[c,d]:[d,c]}function Pd(a,b){var c=a.getVertexData(),d=0,e=0;for(b=Qd(b,a=a.getRetainedInterval(),c.zz),w.sortOn(b,"z",!0);0<b.length;){var f=b.pop(),h=a,g=c.xx,l=c.yy,n=c.zz,p=f,r=h,u=g,t=l,x=n,A=Rd(p.a,r,u,t,x);if(1==(h=Qd(g=Jd(A=A.concat(Rd(p.b,r,u,t,x)),g,l),h,n)).length){for(h=h[0],n=a,g=c.zz,l=[],p=h.a[0],r=h.a[1],u=h.z,t=p+1;t<=r;t++)g[t]!=u&&t!=r||(l.push({a:[p,t],b:h.b,z:u}),t!=r&&(g[t]=n),p=t);2>l.length&&Q("Error in unwindIntersection()"),h=l,d++}for(n=0;n<h.length;n++){for(g=b,l=h[n],p=g.length;0<p&&!(g[p-1].z<=l.z);)g[p]=g[p-1],p--;g[p]=l}}return 5e5<++e?(Oc("Caught an infinite loop at intersection:",f),0):d}function Qd(a,b,c){return a.reduce((function(d,e){var f=hd(c,b,e.a[0],e.a[1]),h=hd(c,b,e.b[0],e.b[1]);return null!==(e=-1==f&&-1==h?null:-1==h||-1!=f&&c[f]>c[h]?{a:e.a,b:e.b,z:c[f]}:{a:e.b,b:e.a,z:c[h]})&&d.push(e),d}),[])}function Rd(a,b,c,d,e){if(d=[],a[0]<=a[1]){var f=a[0];a=a[1]}else f=a[1],a=a[0];var h=f;for(f+=1;f<=a;f++)e[f]>=b&&(c[h]<c[f]?d.push(h,f):d.push(f,h),h=f);return d}function Sd(a){function b(t){for(var x=f(t);x>t;){var A=x,y=r[t];c(t,r[A]),c(A,y),x=f(t=x)}}function c(t,x){u[x]=t,r[t]=x}function f(t){var x=2*t+1,A=x+1,y=n;return x<y&&l(t,x)&&(t=x),A<y&&l(t,A)&&(t=A),t}var p,r,u,h=w.expandoBuffer(Int32Array),g=w.expandoBuffer(Int32Array),l="max"==a?function e(t,x){return p[r[t]]<p[r[x]]}:function d(t,x){t=r[t],x=r[x];var A=p[t],y=p[x];return A>y||A===y&&t>x},n=0;this.init=function(t){for(p=t,n=t.length,r=h(n),u=g(n),t=0;t<n;t++)c(t,t);for(t=n-2>>1;0<=t;t--)b(t)},this.size=function(){return n},this.updateValue=function(t,x){var A=u[t];for(p[t]=x,0<=A&&A<n||Q("Out-of-range heap index."),t=A;0<t&&!l(t,x=t-1>>1);){A=x;var y=r[t];c(t,r[A]),c(A,y),t=x}b(t)},this.popValue=function(){return p[this.pop()]},this.getValue=function(t){return p[t]},this.peek=function(){return r[0]},this.peekValue=function(){return p[r[0]]},this.pop=function(){0>=n&&Q("Tried to pop from an empty heap.");var t=r[0];return c(0,r[--n]),b(0),t}}function Xd(a,b,c){var d=a.getBounds().toArray();!0!==V.containsBounds(b,d)&&a.forEach3((function(e,f,h){for(var l,n,g=c?1/0:0,p=0,r=h.length;p<r;p++)if(l=e[p],n=f[p],l>=b[2]||l<=b[0]||n<=b[1]||n>=b[3]){if(0===g){n=l=0;for(var u=h.length;n<u;n++)(g=h[n])>l&&1/0>g&&(l=g);g=l}1/0!==h[p]&&(h[p]=g)}}))}function Yd(){throw"deleted by simon"}function ae(a){var d=new Yd({proj:"+proj=aea +lon_0=-96 +lat_0=37.5 +lat_1=29.5 +lat_2=45.5",bbox:[-129,23,-62,52]},a=a||{}).addFrame({name:"AK",proj:"+proj=aea +lat_1=55 +lat_2=70 +lat_0=65 +lon_0=-148 +x_0=0 +y_0=0",bbox:[-172.26,50.89,-127,73.21],origin:[-152,63],placement:[-1882782,-969242],scale:.37}).addFrame({name:"HI",proj:"+proj=aea +lat_1=19 +lat_2=24 +lat_0=20.9 +lon_0=-156.5 +x_0=0 +y_0=0",bbox:[-160.5,18.72,-154.57,22.58],origin:[-157,21],placement:[-1050326,-1055362]});return a.PR&&d.addFrame({name:"PR",proj:"+proj=aea +lat_1=18 +lat_2=18.43 +lat_0=17.83 +lon_0=-66.43 +x_0=0 +y_0=0",bbox:[-68.092,17.824,-65.151,18.787],origin:[-66.431,18.228],placement:[1993101,-1254517]}),a.VI&&d.addFrame({name:"VI",proj:"+proj=aea +lat_1=18 +lat_2=18.43 +lat_0=17.83 +lon_0=-66.43 +x_0=0 +y_0=0",bbox:[-65.104,17.665,-64.454,18.505],origin:[-66.431,18.228],placement:[1993101,-1254517]}),d}function ee(a,b){var c,d,e=0;for(c=a.length;e<c;e++){var f=a[e],h=0;for(d=f?f.length:0;h<d;h++)b(f[h],e)}}function fe(a){return a?a.map((function(b){return b.concat()})):null}function ke(a){var c,b={};if(!a)return null;for(c in a)if(a.hasOwnProperty(c)){var d=a[c];d==a&&delete(d=w.extend({},d))[c],b[c]=d&&d.constructor===Object?ke(d):d}return b}function ne(a){if(w.isArray(a))var b=a;else if(b=[],w.isInteger(a))for(var c=0;c<a;c++)b.push({});else a&&Q("Invalid DataTable constructor argument:",a);this.getRecords=function(){return b},this.getReadOnlyRecordAt=function(d){return ke(b[d])}}function oe(a){return("polygon"==a.geometry_type||"polyline"==a.geometry_type)&&pe(a)}function qe(a){return"point"==a.geometry_type&&pe(a)}function pe(a){return w.some(a.shapes||[],(function(b){return!!b}))}function te(a){return(a=ue(a)).data&&(a.data=a.data.clone()),a}function ue(a){var b=w.extend({},a);return a.shapes&&(a=a.shapes,a=w.isArray(a)?a.map(fe):null,b.shapes=a),b}function ve(a){var b=new ArrayBuffer(16),c=new Float64Array(b),d=new Uint32Array(b),e=0|a;if(0==0<e)throw Error("Invalid size param: "+a);return function(f,h){return c[0]=f,c[1]=h,(2147483647&(f=(f=d[0]^d[1])<<5^f>>7^d[2]^d[3]))%e}}function xe(a,b){this._n=this._i=0,this._inc=1,this._xx=a,this._yy=b,this.y=this.x=this.i=0}function ye(a,b,c){var d=0,e=0,f=1,h=0;this.init=function(g,l,n,p){return d=p||0,n?(e=g,f=1,h=g+l):(e=g+l-1,f=-1,h=g-1),this},this.hasNext=function(){var g=e,l=g,n=d,p=h,r=f;if(g==p)return!1;do{l+=r}while(l!=p&&c[l]<n);return e=l,this.x=a[g],this.y=b[g],this.i=g,!0}}function ze(a){this._arcs=a,this.y=this.x=this._n=this._i=0}function Ae(){function a(k){var m=[],q=[];b(k=k.map((function(v){for(var B=v?v.length:0,C=0;C<B;C++)m.push(v[C][0]),q.push(v[C][1]);return B})),m,q)}function b(k,m,q){var v=k.length;for(k instanceof Array&&(k=new Uint32Array(k)),m instanceof Array&&(m=new Float64Array(m)),q instanceof Array&&(q=new Float64Array(q)),g=m,l=q,p=k,r=null,u=0,y=null,n=new Uint32Array(v),q=m=0;q<v;q++)n[q]=m,m+=k[q];return m==g.length&&g.length==l.length||Q("ArcCollection#initXYData() Counting error"),d(),A=new xe(g,l),this}function c(k){k?(k.length!=g.length&&Q("ArcCollection#initZData() mismatched arrays"),k instanceof Array&&(k=new Float64Array(k)),y=new ye(g,l,r=k)):(r=null,u=0,y=null)}function d(){for(var E,G,H,k=g,m=l,q=p,v=q.length,B=new Float64Array(4*v),C=new U,D=0,K=0;K<v;K++)if(0<(E=q[K])){G=4*K;var L=H=void 0,N=void 0,Z=void 0,W=k,la=m,S=E,T=0|D,ba=isNaN(S)?W.length-T:S+T;for(0<ba&&(Z=L=W[T],N=H=la[T]),T++;T<ba;T++){var Ja=W[T];Ja<Z&&(Z=Ja),Ja>L&&(L=Ja),(S=la[T])<N&&(N=S),S>H&&(H=S)}H=[Z,N,L,H],B[G++]=H[0],B[G++]=H[1],B[G++]=H[2],B[G]=H[3],D+=E,C.mergeBounds(H)}t=B,x=C}function e(){var k=r,m=u;if(!k||!m)return this.getPointCount();for(var q=0,v=0,B=k.length;v<B;v++)k[v]>=m&&q++;return q}function f(){var k=e(),m=p.length,q=new Float64Array(k),v=new Float64Array(k);k=new Float64Array(k);for(var E,G,B=new Int32Array(m),C=0,D=0,H=0;H<m;H++){for(G=0,E=C+(E=p[H]);C<E;C++)r[C]>=u&&(q[D]=g[C],v[D]=l[C],k[D]=r[C],D++,G++);1==G&&Q("Collapsed arc"),B[H]=G}return{xx:q,yy:v,zz:k,nn:B}}function h(k,m){var q=new Float64Array(m),v=0;return k.forEach((function(B){for(var C=0,D=B.length;C<D;v++,C++)q[v]=B[C]})),v!=m&&Q("Mismatched thresholds"),q}var g,l,n,p,r,t,x,A,y,u=0;1==arguments.length?a(arguments[0]):3==arguments.length?b.apply(this,arguments):Q("ArcCollection() Invalid arguments"),this.updateVertexData=function(k,m,q,v){b(k,m,q),c(v||null)},this.getVertexData=function(){return{xx:g,yy:l,zz:r,bb:t,nn:p,ii:n}},this.getCopy=function(){var k=new Ae(new Int32Array(p),new Float64Array(g),new Float64Array(l));return r&&(k.setThresholds(new Float64Array(r)),k.setRetainedInterval(u)),k},this.getFilteredCopy=function(){if(!r||0===u)return this.getCopy();var k=f(),m=new Ae(k.nn,k.xx,k.yy);return m.setThresholds(k.zz),m},this.toArray=function(){var k=[];return this.forEach((function(m){for(var q=[];m.hasNext();)q.push([m.x,m.y]);k.push(q)})),k},this.toJSON=function(){return this.toArray()},this.forEachArcSegment=function(k,m){var q=0<=k,v=q?k:~k;k=this.getRetainedInterval();var B=p[v],C=q?1:-1;v=q=q?n[v]:n[v]+B-1;for(var D=g,E=l,G=r,H=0,K=1;K<B;K++)v+=C,(0===k||G[v]>=k)&&(m(q,v,D,E),q=v,H++);return H},this.forEachSegment=function(k){for(var m=0,q=0,v=this.size();q<v;q++)m+=this.forEachArcSegment(q,k);return m},this.transformPoints=function(k){for(var C,m=g,q=l,v=-1,B=0,D=0,E=m.length;D<E;D++,B--){for(;0===B;)B=p[++v];(C=k(m[D],q[D],v))&&(m[D]=C[0],q[D]=C[1])}d()},this.forEach=function(k){for(var m=0,q=this.size();m<q;m++)k(this.getArcIter(m),m)},this.forEach2=function(k){for(var m=0,q=this.size();m<q;m++)k(n[m],p[m],g,l,r,m)},this.forEach3=function(k){for(var m,q,v,B,C,D=0,E=this.size();D<E;D++)q=(m=n[D])+p[D],v=g.subarray(m,q),B=l.subarray(m,q),r&&(C=r.subarray(m,q)),k(v,B,C,D)},this.filter=function(k){var m=function(q){return k(this.getArcIter(q),q)}.bind(this);return this.deleteArcs(m)},this.deleteArcs=function(k){for(var m=this.size(),q=new Int32Array(m),v=0,B=0;B<m;B++)k(B)?q[B]=v++:q[B]=-1;if(v<m){m=k=0,v=w.copyElements;for(var C,D=0,E=q.length;D<E;D++)B=q[D],C=p[D],-1<B&&(v(g,n[D],g,k,C),v(l,n[D],l,k,C),r&&v(r,n[D],r,k,C),p[B]=C,k+=C,m++);b(p.subarray(0,m),g.subarray(0,k),l.subarray(0,k)),r&&c(r.subarray(0,k))}return q},this.dedupCoords=function(){for(var C,D,k=0,m=0,q=0,v=this.size(),B=r;k<v;){for(var E,H,K,G=void 0,L=m,N=q,Z=C=p[k],W=g,la=l,S=B,T=0,ba=0;T<Z;)K=W[E=L+T],H=la[E],(D=K==K&&H==H&&(0===ba||K!=W[E-1]||H!=la[E-1]))&&(W[G=N+ba]=K,la[G]=H,ba++),S&&0<ba&&(D||S[E]>S[G])&&(S[G]=S[E]),T++;D=1<ba?ba:0,p[k]=D,m+=C,q+=D,k++}return m>q&&(b(p,g.subarray(0,q),l.subarray(0,q)),B&&c(B.subarray(0,q))),m-q},this.getVertex=function(k,m){return k=this.indexOfVertex(k,m),{x:g[k],y:l[k]}},this.indexOfVertex=function(k,m){var q=0>k?~k:k,v=p[q];return 0>m&&(m=v+m),q!=k&&(m=v-m-1),(0>m||m>=v)&&Q("[ArcCollection] out-of-range vertex id"),n[q]+m},this.arcIsClosed=function(k){var m=this.indexOfVertex(k,0);return m!=(k=this.indexOfVertex(k,-1))&&g[m]==g[k]&&l[m]==l[k]},this.arcIsLollipop=function(k){if(2>=this.getArcLength(k)||!this.arcIsClosed(k))return!1;var m=this.indexOfVertex(k,1);return k=this.indexOfVertex(k,-2),g[m]==g[k]&&l[m]==l[k]},this.arcIsDegenerate=function(k){k=this.getArcIter(k);for(var q,v,m=0;k.hasNext();){if(0<m&&(q!=k.x||v!=k.y))return!1;q=k.x,v=k.y,m++}return!0},this.getArcLength=function(k){return p[dd(k)]},this.getArcIter=function(k){var m=0<=k,q=m?k:~k,v=r&&u?y:A;return q>=p.length&&Q("#getArcId() out-of-range arc id:",k),v.init(n[q],p[q],m,u)},this.getShapeIter=function(k){return new ze(this).init(k)},this.setThresholds=function(k){var m=this.getPointCount(),q=null;return k&&(k.length==m?q=k:k.length==this.size()?q=h(k,m):Q("Invalid threshold data")),c(q),this},this.flatten=function(){if(0<u){var k=f();this.updateVertexData(k.nn,k.xx,k.yy),u=0}else r=null},this.getRetainedInterval=function(){return u},this.setRetainedInterval=function(k){return u=k,this},this.getRetainedPct=function(){return this.getPctByThreshold(u)},this.setRetainedPct=function(k){if(1<=k)u=0;else{var m=u=this.getThresholdByPct(k);0>=k?m=1/0:1<=k&&(m=0),u=m}return this},this.getRemovableThresholds=function(k){r||Q("[arcs] Missing simplification data."),k|=1;for(var q,m=new Float64Array(Math.ceil(r.length/k)),v=0,B=0,C=this.getPointCount();v<C;v+=k)1/0!=(q=r[v])&&(m[B++]=q);return m.subarray(0,B)},this.getArcThresholds=function(k){0<=k&&k<this.size()||Q("[arcs] Invalid arc id:",k);var m=n[k];return r.subarray(m,m+p[k])},this.getPctByThreshold=function(k,m){return 0<k?(m=this.getRemovableThresholds(m),k=w.findRankByValue(m,k),k=0<m.length?1-(k-1)/m.length:1):k=1,k},this.getThresholdByPct=function(k,m){var q=(m=this.getRemovableThresholds(m)).length;return 1>(k=0===q||1<=k?0:0>=k?q+1:Math.floor((1-k)*(q+2)))?0:k>m.length?1/0:w.findValueByRank(m,k)},this.arcIntersectsBBox=function(k,m){var q=t;return q[k*=4]<=m[2]&&q[k+2]>=m[0]&&q[k+3]>=m[1]&&q[k+1]<=m[3]},this.arcIsContained=function(k,m){var q=t;return q[k*=4]>=m[0]&&q[k+2]<=m[2]&&q[k+1]>=m[1]&&q[k+3]<=m[3]},this.arcIsSmaller=function(k,m){var q=t;return q[2+(k*=4)]-q[k]<m&&q[k+3]-q[k+1]<m},this.isPlanar=function(){return!Ed(this.getBounds())},this.size=function(){return n&&n.length||0},this.getPointCount=function(){return g&&g.length||0},this.getFilteredPointCount=e,this.getBounds=function(){return x.clone()},this.getSimpleShapeBounds=function(k,m){m=m||new U;for(var q=0,v=k.length;q<v;q++)this.mergeArcBounds(k[q],m);return m},this.getSimpleShapeBounds2=function(k,m){m=m||[];var q=t,v=4*dd(k[0]);m[0]=q[v],m[1]=q[++v],m[2]=q[++v],m[3]=q[++v];for(var B=1,C=k.length;B<C;B++)q[v=4*dd(k[B])]<m[0]&&(m[0]=q[v]),q[++v]<m[1]&&(m[1]=q[v]),q[++v]>m[2]&&(m[2]=q[v]),q[++v]>m[3]&&(m[3]=q[v]);return m},this.getMultiShapeBounds=function(k,m){if(m=m||new U,k)for(var q=0,v=k.length;q<v;q++)this.getSimpleShapeBounds(k[q],m);return m},this.mergeArcBounds=function(k,m){0>k&&(k=~k),k*=4,m.mergeBounds(t[k],t[k+1],t[k+2],t[k+3])}}function Ge(a){if(a=function Fe(a){var c,b=require("mproj");return a=a.replace(/(^| )([\w]+)($| )/,(function(d,e,f,h){return f in b.internal.pj_list?e+"+proj="+f+h:d})),(c=/^(\+[^ ]+ *)+$/.test(a)?a:a in Ee?Ee[a]:/^(esri|epsg|nad83|nad27):[0-9]+$/i.test(String(a))?"+init="+a.toLowerCase():a in Ic.defs?Ic.defs[a]:function Zd(a){var b=[],c=(a=a.trim().split(/ +/).filter((function(e){return!/^\+/.test(e)||(b.push(e.substr(1)),!1)})))[0],d=function $d(a){var b={};return a.forEach((function(c){!function be(a,b){var c=(a=a.split("="))[0].split("."),d=c.pop();b=c.reduce((function(e,f){if(0==f in e)e[f]={};else if(!w.isObject(e[f]))return{};return e[f]}),b),1<a.length?b[d]=function ce(a){var b;return 0<a.indexOf(",")?b=a.split(",").map(parseFloat):(null===(b=w.parseNumber(a))&&(b=a),b)}(a[1]):0!=d in b||c.length||(b[d]={})}(c,b)})),b}(b);return 1!=a.length?null:a="albersusa"==c?new ae(d):null}(a))||R("Unknown projection definition:",a),c}(a),w.isString(a))try{var b=require("mproj").pj_init(a)}catch(c){R("Unable to use projection",a,"("+c.message+")")}else b=a;return b||null}function He(a){var b=a.info||{},c=b.crs;if(!c&&b.prj){b=b.prj;try{var d=require("mproj").internal.wkt_to_proj4(b)}catch(e){R("Unusable .prj file ("+e.message+")")}c=Ge(d)}return!c&&Ed(function Ce(a){var b=new U;return a.layers.forEach((function(c){var d=a.arcs,e=null;"point"==c.geometry_type?e=function de(a){var b=new U;return ee(a,(function(c){b.mergePoint(c[0],c[1])})),b}(c.shapes):"polygon"!=c.geometry_type&&"polyline"!=c.geometry_type||(e=fd(c.shapes,d)),(c=e)&&b.mergeBounds(c)})),b}(a))&&(c=Ge("wgs84")),c}function Le(a,b,c){return function ge(a,b){if(!a)return null;w.isArray(a)||Q("Expected an array, received:",a);for(var e,c=0,d=a.length,f=0;f<d;f++)null===(e=b(a[f],f,a))?(c++,a[f]=null):w.isArray(e)&&(a[f]=e);return c==d?null:0<c?a.filter((function(h){return!!h})):a}(a,(function(d){return d=function Me(a,b){for(var c=0,d=0,e=a.length;d<e;d++)b.arcIsDegenerate(a[d])&&(c++,a[d]=null);return 0<c?a.filter((function(f){return null!==f})):a}(d,b),"polygon"==c&&d&&(Ne(d),0===V.getPlanarPathArea(d,b)&&(d=null)),d}))}function Ne(a){var b=a.length;if(2<=b){if(a[0]==~a[b-1])a.pop(),a.shift();else for(var c=1;c<b;c++)if(a[c-1]==~a[c]){a.splice(c-1,2);break}a.length<b&&Ne(a)}}function Oe(a){w.isNumber(a)&&0!==a||Q("Rounding increment must be a non-zero number.");var b=1/a;return 1<b&&(b=Math.round(b)),function(c){return Math.round(c*b)/b}}function Re(a){return-1e38<a[0]&&-1e38<a[1]}function Se(a){var b=1e4,c=new Float64Array(b),d=new Float64Array(b),e=0;this.endPath=function(){a(c,d,e),e=0},this.addPoint=function(f,h){e>=b&&(b=Math.ceil(1.3*b),c=w.extendBuffer(c,b),d=w.extendBuffer(d,b)),c[e]=f,d[e]=h,e++}}function Te(a){function b(m){var q=x<p.length?p[x]:null;q?q!=m&&R("Unable to import mixed-geometry GeoJSON features"):(p[x]=m,r?m!=r&&(r="mixed"):r=m)}function c(m){m>f.length&&(m=Math.max(m,Math.ceil(1.5*f.length)),f=w.extendBuffer(f,m,A),h=w.extendBuffer(h,m,A))}function d(m){(g[x]||(g[x]=[])).push(m)}var e=0<a.reserved_points?a.reserved_points:2e4,f=new Float64Array(e),h=new Float64Array(e),g=[],l=[],n=[],p=[],r=a.type||null,u=null,t=-1,x=-1,A=0,y=0,k=0;a.precision&&(u=Oe(a.precision)),w.extend(this,new Se((function(m,q,v){var B=0;c(A+v);for(var C=0;C<v;C++){var D=m[C],E=q[C];u&&(D=u(D),E=u(E)),0<C&&D==H&&E==G?y++:(f[A]=D,h[A]=E,A++,B++);var G=E,H=D}"polygon"==r&&0<B&&(m[0]!=m[v-1]||q[0]!=q[v-1])&&(c(A+1),f[A]=m[0],h[A]=q[0],k++,A++,B++),t++,n[t]=B,d([t])}))),this.startShape=function(m){g[++x]=null,m&&(l[x]=m)},this.importLine=function(m){2>m.length?Oc("Skipping a defective line"):(b("polyline"),this.importPath(m))},this.importPoints=function(m){b("point"),m=m.filter(Re),u&&m.forEach((function(q){q[0]=u(q[0]),q[1]=u(q[1])})),m.forEach(d)},this.importRing=function(m,q){var v=V.getPlanarPathArea2(m);!v||4>m.length?Oc("Skipping a defective ring"):(b("polygon"),(!0===q&&0<v||!1===q&&0>v)&&m.reverse(),this.importPath(m))},this.importPath=function(m){for(var q,v=0,B=m.length;v<B;v++)q=m[v],this.addPoint(q[0],q[1]);this.endPath()},this.done=function(){var m={name:""};if(0<y&&Oc(w.format("Removed %,d duplicate point%s",y,w.pluralSuffix(y))),0<k&&Nc(w.format("Closed %,d open polygon ring%s",k,w.pluralSuffix(k))),0<A){A<f.length&&(f=f.subarray(0,A),h=h.subarray(0,A));var q=new Ae(n,f,h)}return"mixed"==r?m=function se(a,b,c){return w.uniq(c).map((function(d){for(var g,e=[],f=[],h=0,l=0,n=a.length;l<n;l++)c[l]==d&&(d&&f.push(a[l]),g=b[l],e.push(g),g||h++);return{geometry_type:d,shapes:f,data:h<f.length?new ne(e):null}}))}(g,l,p):(m={geometry_type:r},r&&(m.shapes=g),0<l.length&&(m.data=new ne(l)),m=[m]),m.forEach((function(v){if(v.data){var C,D,B=function le(a){var c,d,b={};for(c=0;c<a.length;c++){var e=Object.keys(a[c]||{});for(d=0;d<e.length;d++)b[e[d]]=1+(0|b[e[d]])}return Object.keys(b).filter((function(f){return b[f]<a.length}))}(v=v.data.getRecords());for(C=0;C<v.length;C++){var E=v[C]||(v[C]={});for(D=0;D<B.length;D++){var G=B[D];0==G in E&&(E[G]=void 0)}}}})),{arcs:q||null,info:{},layers:m}}}function Ue(a){var b=a.id_field||Y.ID_FIELD,c=new Te(a);this.parseObject=function(d){if(d&&d.type)if("Feature"==d.type){var e=d.geometry,f=d.properties||{};"id"in d&&(f[b]=d.id)}else e=d;else e=null;c.startShape(f),e&&Y.importGeometry(e,c,a)},this.done=function(){return c.done()}}function Ye(a,b,c){if("point"==c)return function Xe(a){return a&&0!==a.length?{bounds:(a={points:a,pointCount:a.length,bounds:V.getPathBounds(a)}).bounds,pathData:[a],partCount:1,pointCount:a.pointCount}:{partCount:0,pointCount:0}}(a);var d=0,e=new U,f=[];return!a||"polyline"!=c&&"polygon"!=c||a.forEach((function(h){for(var p,r,u,t,g=b.getShapeIter(h),l=[],n=0;g.hasNext();)p=g.x,r=g.y,0!==n&&u==p&&t==r||(l.push([p,r]),n++),u=p,t=r;g={points:l,pointCount:l.length},l=!0,g.ids=h,"polygon"==c?(g.area=V.getPlanarPathArea2(g.points),l=3<g.pointCount&&0!==g.area):"polyline"==c&&(l=1<g.pointCount),l?(d+=g.pointCount,g.bounds=V.getPathBounds(g.points),e.mergeBounds(g.bounds),f.push(g)):Oc("Skipping a collapsed",c,"path")})),{pointCount:d,pathData:f,pathCount:f.length,bounds:e}}function Ze(a){return JSON.stringify(a).replace(/\n/g,"\n").replace(/\r/g,"\r")}function af(a){function b(g,l,n,p,r){r=r(n);var t,x,A,u=c(g[n],l[n]);for(u=d[u];-1!=u;){if(t=f[u][0],x=f[u][1],A=t.length,t[0]===g[p]&&t[A-1]===g[n]&&t[A-2]===g[r]&&x[0]===l[p]&&x[A-1]===l[n]&&x[A-2]===l[r])return u;u=e[u]}return null}var c=ve(a=Math.floor(.25*a+1)),d=new Int32Array(a),e=[],f=[],h=0;w.initializeArray(d,-1),this.addArc=function(g,l){var n=g.length-1;n=c(g[n],l[n]);var p=d[n],r=f.length;return d[n]=r,f.push([g,l]),h+=g.length,e.push(p),r},this.findDuplicateArc=function(g,l,n,p,r,u){return null===(r=b(g,l,n,p,r))?b(g,l,p,n,u):~r},this.getVertexData=function(){for(var r,u,g=new Float64Array(h),l=new Float64Array(h),n=new Uint32Array(f.length),p=0,t=0,x=f.length;t<x;t++)u=(r=f[t])[0].length,w.copyElements(r[0],0,g,p,u),w.copyElements(r[1],0,l,p,u),n[t]=u,p+=u;return{xx:g,yy:l,nn:n}}}function bf(a){if(a.arcs){var b=a.arcs.getVertexData(),c=function cf(a,b,c){function d(y){var k=r[y],m=y+1;return m<n&&r[m]===k?y+1:f(y,y-(k=a[k])+1)?y-k+2:-1}function e(y){var k=r[y],m=y-1;return 0<=m&&r[m]===k?y-1:f(y,y+(k=a[k])-1)?y+k-2:-1}function f(y,k){return b[y]==b[k]&&c[y]==c[k]}function h(y){var k=p[y],m=e(y),q=d(y);if(-1==m||-1==q)return!0;for(;y!=k;){var C,v=e(k),B=d(k);if(!(C=-1==v||-1==B)){C=b[m];var D=b[q],E=b[v],G=b[B],H=c[m],K=c[q];v=c[v],B=c[B],C=!(C==G&&D==E&&H==B&&K==v||C==E&&D==G&&H==v&&K==B)}if(C)return!0;k=p[k]}return!1}function g(y,k,m,q,v){for(var B=new(b.subarray&&c.subarray?Float64Array:Array)(m-k+v-q+2),C=0;k<=m;k++)B[C++]=y[k];for(k=q;k<=v;k++)B[C++]=y[k];return B}function l(y,k){var m=u.findDuplicateArc(b,c,y,k,d,e);return null===m&&(m=u.addArc(t.call(b,y,k+1),t.call(c,y,k+1))),m}var n=b.length,p=function we(a,b){var h,c=a.length,d=Math.floor(1.3*c)||1,e=ve(d),f=new Int32Array(d);for(d=new Int32Array(c),h=0;h<c;h++){var g=a[h],l=b[h];g!=g||l!=l?l=-1:(l=f[g=e(g,l)]-1,f[g]=h+1),d[h]=0<=l?l:h}for(g=a.length-1;0<=g;g--)if(!((e=d[g])>=g)){f=g,h=-1;do{e=d[c=e],b[c]==b[g]&&a[c]==a[g]?(d[c]=f,f=c):(-1<h&&(d[h]=c),h=c)}while(e<c);-1<h&&(d[h]=h),d[g]=f}return d}(b,c),r=function ef(a,b){a=new Int32Array(a);for(var c=0,d=0,e=b.length;d<e;d++)for(var f=0,h=b[d];f<h;f++,c++)a[c]=d;return a}(n,a),u=new af(n),t=b.subarray&&c.subarray?b.subarray:Array.prototype.slice,x=function(y){for(var q,k=[],m=0,v=0,B=y.length;v<B;v++){q=y[v];var C=k,D=C.push;if(2>q)var E=null;else{var G=void 0,H=m,K=m+q-1;E=[];for(var L=-1,N=H;N<K;N++)h(N)&&(-1<L?E.push(l(G,N)):L=N,G=N);if(-1==L){var Z=(N=E).push;a:{for(L=H,H=K,G=p[L],K=r[L];G!=L&&!(r[G]<K);)G=p[G];if(G==L)H=l(L,H);else{for(G=L;G<H;G++)if(null!==(L=u.findDuplicateArc(b,c,G,G,d,e))){H=L;break a}Q("Unmatched ring; id:",K,"len:",a[K]),H=void 0}}Z.call(N,H)}else if(L==H)h(K)||Q("Topology error"),E.push(l(G,N));else{Z=(N=E).push,H+=1;var W=u.findDuplicateArc(b,c,G,L,d,e);null===W&&(W=u.addArc(g(b,G,K,H,L),g(c,G,K,H,L))),Z.call(N,W)}}D.call(C,E),m+=q}return k}(a),A=u.getVertexData();return A.paths=x,A}(b.nn,b.xx,b.yy);a.arcs.updateVertexData(c.nn,c.xx,c.yy),a.layers.forEach((function(d){"polyline"!=d.geometry_type&&"polygon"!=d.geometry_type||(d.shapes=function df(a,b){return a.map((function(e){return function c(e,f){return e?e.map((function(h){return function d(e,f){return e.reduce((function(h,g){var l=dd(g);if(l=f[l]){if(0>g){(g=l=l.concat()).reverse();for(var n=0,p=g.length;n<p;n++)g[n]=~g[n]}for(g=0,n=l.length;g<n;g++)h.push(l[g])}return h}),[])}(h,f)})):null}(e,b)}))}(d.shapes,c.paths))}))}}function kf(a,b,c){var h,d={},e=a.layers,f=function pf(a,b){var c=b.geojson_type||"";return"Feature"==c||"FeatureCollection"==c||"GeometryCollection"!=c&&(c&&R("Unsupported GeoJSON type:",b.geojson_type),w.some(a,(function(d){var e=d.data?d.data.getFields():[];return d=sf(e,b),e=!!tf(e,b),d||e})))}(e,b);return d.type=f?"FeatureCollection":"GeometryCollection",b.gj2008&&function qf(a,b){!(a=a.info||{}).crs&&"input_geojson_crs"in a&&(b.crs=a.input_geojson_crs)}(a,d),b.bbox&&(h=function of(a,b){var c=He(a);b=b&&c&&(c&&c.is_latlong||!1);var f,d=new U,e=new U;return a.layers.forEach((function(h){oe(h)?function jd(a,b,c,d){var e=0;a.forEach((function(f,h){if(f&&0!==f.length){d&&d(h);for(var g=0,l=f.length;g<l;g++){var n=f[g];if(c&&c({i:g,shapeId:h,shape:f,arcs:n}),b)for(var p=0,r=n.length;p<r;p++,e++){var u=n[p];b({i:p,shapeId:h,partId:g,arcId:u,segId:e})}}}}))}(h.shapes,null,(function(g){(0>(g=a.arcs.getSimpleShapeBounds(g.arcs)).centerX()?d:e).mergeBounds(g)})):qe(h)&&ee(h.shapes,(function(g){(0>g[0]?d:e).mergePoint(g[0],g[1])}))})),(c=(new U).mergeBounds(e).mergeBounds(d)).hasBounds()&&(f=c.toArray()),b&&e.hasBounds()&&d.hasBounds()&&(b=e.xmin-d.xmax,c=360+d.xmin-e.xmax,0<b&&b>c&&(f[0]=e.xmin,f[2]=d.xmax)),f||null}(a,b.rfc7946||b.v2))&&(d.bbox=h),e=e.reduce((function(g,l){return l=function lf(a,b,c,d,e){var f=function mf(a,b){var c=a?a.getFields():[],d=tf(c,b);return sf(c,b)?(a=a.getRecords(),d==Y.ID_FIELD?a.map((function(e){return delete(e=w.extend({},e))[d],e})):a):null}(a.data,c),h=a.shapes,g=function nf(a,b){var d=tf(a?a.getFields():[],b);return d?a.getRecords().map((function(e){return d in e?e[d]:null})):null}(a.data,c),l=c.ndjson?Ze:c.prettify?function $e(a){function b(e,f){return e in c&&w.isArray(f)&&(e=JSON.stringify(f)).indexOf(!1)?"က⿕̐"+e.replace(/,/g,", ")+"က⿕̐":f}var c=w.arrayToIndex(a),d=/"\u1000\u2fd5\u0310|\u1000\u2fd5\u0310"/g;return function(e){return JSON.stringify(e,b,"  ").replace(d,"")}}(["bbox","coordinates"]):JSON.stringify;return f&&h&&f.length!==h.length&&Q("Mismatch between number of properties and number of shapes"),(h||f||[]).reduce((function(n,p,r){p=h?h[r]:null;var u=Y.exporters[a.geometry_type];if(p=p?u(p,b.arcs,c):null,d)p={type:"Feature",geometry:p,properties:f?f[r]:null},g&&(p.id=g[r]);else if(!p)return n;return e&&(p=l(p),"buffer"==e&&(r=p,p=/^utf-?8$/i.test("utf8")?ie(r):iconv.encode(r,"utf8"))),n.push(p),n}),[])}(l,a,b,f,c),0<g.length?g.concat(l):l}),[]),"Feature"==b.geojson_type&&1==e.length?e[0]:b.ndjson?Y.formatCollectionAsNDJSON(e):c?Y.formatCollection(d,e):(d[rf(d.type)]=e,d)}function rf(a){return"FeatureCollection"==a?"features":"GeometryCollection"==a?"geometries":void Q("Invalid collection type:",a)}function sf(a,b){return!(b.drop_table||b.cut_table||0===a.length||1==a.length&&a[0]==Y.ID_FIELD)}function tf(a,b){var c=[];return b=b.id_field,w.isString(b)?c.push(b):w.isArray(b)&&(c=b),c.push(Y.ID_FIELD),w.find(c,(function(d){return w.contains(a,d)}))}function preBuild(a){let b={snap:!0,no_repair:!1};var c=b||{},d=Object.keys(Y.pathImporters);return a=w.isString(a)?JSON.parse(a):a,c=new Ue(c),((d="Feature"==a.type?{type:"FeatureCollection",features:[a]}:d.includes(a.type)?{type:"GeometryCollection",geometries:[a]}:a).features||d.geometries||[]).forEach(c.parseObject),d=c.done(),"crs"in a&&(d.info.input_geojson_crs=a.crs),d.info.import_options=b,function Qe(a,b){var d,c=a.arcs;(b.snap||b.auto_snap||b.snap_interval)&&(b.snap_interval&&(d=function Ke(a,b){var h,c=w.isString(a)?a:"",d=/(sq|)([a-z]+)(2|)$/i.exec(c);if(w.isNumber(a))c=a;else if(""===c)c=NaN;else if(d){var e=Ie[d[2].toLowerCase()],f=!(!d[1]&&!d[3]);c=Number(c.substring(0,c.length-d[0].length)),e||isNaN(c)||R("Unknown units: "+d[0])}else c=Number(c);isNaN(c)&&R("Invalid parameter:",a),d=e;var g=0,l=0;return b&&(b.is_latlong?l=1:0<b.to_meter?l=b.to_meter:Q("Invalid CRS")),d&&((g=Je[d])||Q("Unknown units:",d)),g&&l?h=g/l:g||l?g&&!l?R("Unable to convert",d,"to unknown coordinates"):!g&&l&&(h=1/l):h=1,e&&b&&b.is_latlong&&R("Parameter does not support distance units with latlong datasets"),f&&R("Expected a distance, received an area:",a),c*h}(b.snap_interval,He(a))),c&&vd(c,d)),a.layers.forEach((function(e){if(oe(e)){var f=e.shapes;e=e.geometry_type;for(var h=0,g=f.length;h<g;h++)f[h]=Le(f[h],c,e)}}))}(d,b),bf(d),d.info.input_files=["input.json"],d.info.input_formats=["geojson"],d}function simplify(a,b){(a=w.extend({},a)).layers=a.layers.map(te),a.arcs&&(a.arcs=a.arcs.getFilteredCopy());a:{var c={percentage:b,keep_shapes:!0,no_repair:!1,method:"weighted_visvalingam"};if((b=a.arcs)&&0!==b.size()){c=c||{};var d=c=w.defaults({method:"weighted_visvalingam",spherical:!c.planar&&!a.arcs.isPlanar()},c),e=X.getWeightedSimplifier(d,d.spherical);if(b.setThresholds(new Float64Array(b.getPointCount())),d.spherical?(function Wd(a,b){var c=w.expandoBuffer(Float64Array),d=w.expandoBuffer(Float64Array),e=w.expandoBuffer(Float64Array);a.forEach3((function(f,h,g){var l=f.length,n=c(l),p=d(l);l=e(l),V.convLngLatToSph(f,h,n,p,l),b(g,n,p,l)}))}(b,e),Xd(b,Dd(1e-12),!1)):function Vd(a,b){a.forEach3((function(c,d,e){b(e,c,d)}))}(b,e),d.lock_box&&((d=b.getBounds()).padBounds(-1e-14,-1e-14,-1e-14,-1e-14),Xd(b,d.toArray(),!0)),c.percentage||0===c.percentage)b.setRetainedPct(w.parsePercent(c.percentage));else if(!c.interval&&0!==c.interval&&!c.resolution&&c.presimplify)break a;if(b=a.arcs,c.keep_shapes&&function Td(a,b){b.forEach((function(c){"polygon"==c.geometry_type&&function Ud(a,b){b.forEach((function(c){for(var f,h,d=0,e=c?c.length:0,g=0;g<e;g++)(h=a.getSimpleShapeBounds(c[g]).area())>d&&(f=c[g],d=h);if(f&&0!==f.length){for(c=f,d=a.getRetainedInterval(),a.setRetainedInterval(1/0),e=V.getPlanarPathArea(c,a);1e-10>=e;){var l=void 0,n=c;f=0;for(var p=a.getVertexData(),r=0;r<n.length;r++)0>(g=n[r])&&(g=~g),h=(e=p.ii[g])+p.nn[g]-1,-1!=(e=hd(p.zz,1/0,e,h))&&(e=p.zz[e])>f&&(f=e,l=g);if(0<f){for(h=(e=p.ii[l])+p.nn[l]-1,g=p.zz,l=0;e<=h;e++)g[e]===f&&(g[e]=1/0,l++);e=l}else e=0;if(0===e){Oc("[protectMultiRing()] Failed on ring:",c);break}e=V.getPlanarPathArea(c,a)}a.setRetainedInterval(d)}else Oc("[protectShape()] Invalid shape:",c)}))}(a,c.shapes)}))}(b,a.layers),!c.no_repair&&0<b.getRetainedInterval()){for(c=d=Hd(b);0<Pd(b,c);)c=Hd(b);d=(b=d.length)>(c=c.length)?b-c:0,0<b&&(b=w.format("Repaired %'i intersection%s",d,w.pluralSuffix(d)),0<c&&(b+=w.format("; %'i intersection%s could not be repaired",c,w.pluralSuffix(c))),Nc(b))}}}return function hf(a,b){var d,c=(b=b||{}).extension||"json";return(b.precision||b.rfc7946)&&function Pe(a,b){var c=Oe(b);!function De(a,b){a.arcs&&a.arcs.transformPoints(b),a.layers.forEach((function(c){qe(c)&&function re(a,b){qe(a)&&ee(a.shapes,(function(c){var d=b(c[0],c[1]);c[0]=d[0],c[1]=d[1]}))}(c,b)}))}(a,(function(d,e){return[c(d),c(e)]}))}(a=function Be(a){return(a=w.extend({},a)).layers=a.layers.map(ue),a.arcs&&(a.arcs=a.arcs.getFilteredCopy()),a}(a),b.precision||1e-6),(b.v2||b.rfc7946)&&(d=function jf(a){if(!(a=He(a))||!a||!a.is_latlong){var b="RFC 7946 warning: non-WGS84 GeoJSON output.";a&&(b+=' Tip: use "-proj wgs84" to convert.')}return b}(a))&&Nc(d),b.file&&(c=function gf(a){var b={filename:"",directory:"",basename:"",extension:""},c=-1==a.indexOf("/")&&-1!=a.indexOf("\\")?"\\":"/",d=a.split(c),e=d.pop(),f=/\.([a-z][a-z0-9]*)$/i;return(f=f.test(e)?f.exec(e)[0]:"")||e.includes("*")?(b.filename=e,b.extension=f?f.slice(1):"",b.basename=e.slice(0,e.length-f.length),b.directory=d.join(c)):b.directory=e?a:d.join(c),b}(b.file).extension),(b.combine_layers?[a.layers]:a.layers.map((function(e){return[e]}))).map((function(e){var f=function ff(a){return a.reduce((function(b,c){return null===b?b=c.name||null:b&&c.name&&(b=w.mergeNames(b,c.name)),b}),null)||""}(e)||"output";return{content:kf(e=w.defaults({layers:e},a),b),filename:f+"."+c}}))}(a,{})[0].content}var aa={},w=Object.freeze({__proto__:null,get default(){return w},get getUniqueName(){return ca},get isFunction(){return da},get isObject(){return ea},get clamp(){return fa},get isArray(){return ha},get isNumber(){return ia},get isValidNumber(){return ja},get isFiniteNumber(){return ka},get isNonNegNumber(){return ma},get isInteger(){return na},get isString(){return oa},get isDate(){return pa},get isBoolean(){return qa},get formatDateISO(){return ra},get toArray(){return sa},get isArrayLike(){return ta},get addslashes(){return ua},get regexEscape(){return va},get htmlEscape(){return wa},get defaults(){return xa},get extend(){return ya},get inherit(){return za},get reduceAsync(){return Aa},get merge(){return Ba},get difference(){return Ca},get intersection(){return Da},get indexOf(){return Ea},get contains(){return Fa},get some(){return Ga},get every(){return Ha},get find(){return Ia},get range(){return Ka},get repeat(){return La},get sum(){return Ma},get getArrayBounds(){return Na},get uniq(){return Oa},get pluck(){return Pa},get countValues(){return Qa},get indexOn(){return Ra},get groupBy(){return Sa},get arrayToIndex(){return Ta},get forEach(){return Ua},get forEachProperty(){return Va},get initializeArray(){return Wa},get replaceArray(){return Xa},get repeatString(){return Ya},get pluralSuffix(){return Za},get endsWith(){return $a},get lpad(){return ab},get rpad(){return bb},get trim(){return cb},get ltrim(){return db},get rtrim(){return eb},get addThousandsSep(){return fb},get numToStr(){return gb},get formatNumber(){return hb},get shuffle(){return ib},get sortOn(){return jb},get genericSort(){return kb},get getSortedIds(){return lb},get sortArrayIndex(){return mb},get reorderArray(){return nb},get getKeyComparator(){return ob},get getGenericComparator(){return pb},get quicksort(){return qb},get quicksortPartition(){return rb},get findRankByValue(){return sb},get findValueByPct(){return tb},get findValueByRank(){return ub},get findMedian(){return vb},get mean(){return wb},get format(){return xb},get formatter(){return yb},get wildcardToRegExp(){return zb},get createBuffer(){return Ab},get expandoBuffer(){return Bb},get copyElements(){return Cb},get extendBuffer(){return Db},get mergeNames(){return Eb},get findStringPrefix(){return Fb},get parsePercent(){return Gb},get formatVersionedName(){return Hb},get uniqifyNames(){return Ib},get parseString(){return Jb},get parseNumber(){return Kb},get parseIntlNumber(){return Lb},get cleanNumericString(){return Mb},get trimQuotes(){return Nb}}),Qb=Math.PI/180,bc=Object.freeze({__proto__:null,R:6378137,D2R:Qb,R2D:180/Math.PI,degreesToMeters:function(a){return a*Qb*6378137},distance3D:Rb,distanceSq:z,distance2D:Sb,distanceSq3D:Tb,innerAngle2:function(a,b,c,d,e,f){return(a=Math.abs(Math.atan2(b-d,a-c)-Math.atan2(f-d,e-c)))>Math.PI&&(a=2*Math.PI-a),a},standardAngle:Ub,signedAngle:function(a,b,c,d,e,f){return a==c&&b==d||c==e&&d==f?NaN:(a-=c,b-=d,c=e-c,d=f-d,Ub(Math.atan2(a*d-b*c,a*c+b*d)))},bearing2D:function(a,b,c,d){return(a=Math.PI/2-Math.atan2(d-b,c-a))>Math.PI?a-2*Math.PI:a},bearing:Vb,signedAngleSph:function(a,b,c,d,e,f){return a==c&&b==d||c==e&&d==f?NaN:(a=Vb(c,d,a,b),c=Vb(c,d,e,f),Ub(2*Math.PI+a-c))},convLngLatToSph:function(a,b,c,d,e){for(var f=[],h=0,g=a.length;h<g;h++)Wb(a[h],b[h],f),c[h]=f[0],d[h]=f[1],e[h]=f[2]},xyzToLngLat:function(a,b,c,d){var e=Rb(0,0,0,a,b,c);c=Math.asin(c/e)/Qb,d[0]=Math.atan2(b/e,a/e)/Qb,d[1]=c},lngLatToXYZ:Wb,sphericalDistance:Xb,greatCircleDistance:Yb,innerAngle:function(a,b,c,d,e,f){var h=Sb(a,b,c,d),g=Sb(c,d,e,f);return 0===h||0===g||(a=((a-c)*(e-c)+(b-d)*(f-d))/(h*g))>=1-1e-14?0:a<=1e-14-1?Math.PI:Math.acos(a)},innerAngle3D:function(a,b,c,d,e,f,h,g,l){var n=Rb(a,b,c,d,e,f),p=Rb(d,e,f,h,g,l);return 0===n||0===p||1<=(a=((a-d)*(h-d)+(b-e)*(g-e)+(c-f)*(l-f))/(n*p))?0:-1>=a?Math.PI:Math.acos(a)},triangleArea:function(a,b,c,d,e,f){return Math.abs(((b-f)*(c-e)+(d-f)*(e-a))/2)},cosine:function(a,b,c,d,e,f){var h=Sb(a,b,c,d)*Sb(c,d,e,f),g=0;return 0<h&&(1<(g=((a-c)*(e-c)+(b-d)*(f-d))/h)?g=1:-1>g&&(g=-1)),g},cosine3D:function(a,b,c,d,e,f,h,g,l){var n=Rb(a,b,c,d,e,f)*Rb(d,e,f,h,g,l),p=0;return 0<n&&(1<(p=((a-d)*(h-d)+(b-e)*(g-e)+(c-f)*(l-f))/n)?p=1:-1>p&&(p=-1)),p},triangleArea3D:function(a,b,c,d,e,f,h,g,l){return.5*Math.sqrt(Zb(a,b,d,e,h,g)+Zb(a,c,d,f,h,l)+Zb(b,c,e,f,g,l))},pointSegDistSq:function(a,b,c,d,e,f){return $b(z(a,b,c,d),a=z(a,b,e,f),c=z(c,d,e,f))},pointSegDistSq3D:function(a,b,c,d,e,f,h,g,l){return $b(Tb(a,b,c,d,e,f),a=Tb(a,b,c,h,g,l),d=Tb(d,e,f,h,g,l))},pointSegDistSq2:ac,containsBounds:function(a,b){return a[0]<=b[0]&&a[2]>=b[2]&&a[1]<=b[1]&&a[3]>=b[3]}}),F=[],I=[],cc="undefined"!=typeof Uint8Array?Uint8Array:Array,dc=!1,ic={}.toString,jc=Array.isArray||function(a){return"[object Array]"==ic.call(a)};J.TYPED_ARRAY_SUPPORT=void 0===aa.TYPED_ARRAY_SUPPORT||aa.TYPED_ARRAY_SUPPORT,J.poolSize=8192,J._augment=function(a){return a.__proto__=J.prototype,a},J.from=function(a,b,c){return mc(null,a,b,c)},J.TYPED_ARRAY_SUPPORT&&(J.prototype.__proto__=Uint8Array.prototype,J.__proto__=Uint8Array),J.alloc=function(a,b,c){return qc(a),0>=a?kc(null,a):void 0!==b?"string"==typeof c?kc(null,a).fill(b,c):kc(null,a).fill(b):kc(null,a)},J.allocUnsafe=function(a){return lc(null,a)},J.allocUnsafeSlow=function(a){return lc(null,a)},J.isBuffer=function sc(a){return null!=a&&(!!a._isBuffer||Hc(a)||"function"==typeof a.readFloatLE&&"function"==typeof a.slice&&Hc(a.slice(0,0)))},J.compare=function(a,b){if(!M(a)||!M(b))throw new TypeError("Arguments must be Buffers");if(a===b)return 0;for(var c=a.length,d=b.length,e=0,f=Math.min(c,d);e<f;++e)if(a[e]!==b[e]){c=a[e],d=b[e];break}return c<d?-1:d<c?1:0},J.isEncoding=function(a){switch(String(a).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},J.concat=function(a,b){if(!jc(a))throw new TypeError('"list" argument must be an Array of Buffers');if(0===a.length)return J.alloc(0);var c;if(void 0===b)for(c=b=0;c<a.length;++c)b+=a[c].length;b=J.allocUnsafe(b);var d=0;for(c=0;c<a.length;++c){var e=a[c];if(!M(e))throw new TypeError('"list" argument must be an Array of Buffers');e.copy(b,d),d+=e.length}return b},J.byteLength=oc,J.prototype._isBuffer=!0,J.prototype.swap16=function(){var a=this.length;if(0!=a%2)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var b=0;b<a;b+=2)xc(this,b,b+1);return this},J.prototype.swap32=function(){var a=this.length;if(0!=a%4)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var b=0;b<a;b+=4)xc(this,b,b+3),xc(this,b+1,b+2);return this},J.prototype.swap64=function(){var a=this.length;if(0!=a%8)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var b=0;b<a;b+=8)xc(this,b,b+7),xc(this,b+1,b+6),xc(this,b+2,b+5),xc(this,b+3,b+4);return this},J.prototype.toString=function(){var a=0|this.length;return 0===a?"":0===arguments.length?wc(this,0,a):vc.apply(this,arguments)},J.prototype.equals=function(a){if(!M(a))throw new TypeError("Argument must be a Buffer");return this===a||0===J.compare(this,a)},J.prototype.inspect=function(){var a="";return 0<this.length&&(a=this.toString("hex",0,50).match(/.{2}/g).join(" "),50<this.length&&(a+=" ... ")),"<Buffer "+a+">"},J.prototype.compare=function(a,b,c,d,e){if(!M(a))throw new TypeError("Argument must be a Buffer");if(void 0===b&&(b=0),void 0===c&&(c=a?a.length:0),void 0===d&&(d=0),void 0===e&&(e=this.length),0>b||c>a.length||0>d||e>this.length)throw new RangeError("out of range index");if(d>=e&&b>=c)return 0;if(d>=e)return-1;if(b>=c)return 1;if(this===a)return 0;var f=(e>>>=0)-(d>>>=0),h=(c>>>=0)-(b>>>=0),g=Math.min(f,h);for(d=this.slice(d,e),a=a.slice(b,c),b=0;b<g;++b)if(d[b]!==a[b]){f=d[b],h=a[b];break}return f<h?-1:h<f?1:0},J.prototype.includes=function(a,b,c){return-1!==this.indexOf(a,b,c)},J.prototype.indexOf=function(a,b,c){return yc(this,a,b,c,!0)},J.prototype.lastIndexOf=function(a,b,c){return yc(this,a,b,c,!1)},J.prototype.write=function(a,b,c,d){if(void 0===b)d="utf8",c=this.length,b=0;else if(void 0===c&&"string"==typeof b)d=b,c=this.length,b=0;else{if(!isFinite(b))throw Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");b|=0,isFinite(c)?(c|=0,void 0===d&&(d="utf8")):(d=c,c=void 0)}var e=this.length-b;if((void 0===c||c>e)&&(c=e),0<a.length&&(0>c||0>b)||b>this.length)throw new RangeError("Attempt to write outside buffer bounds");for(d||(d="utf8"),e=!1;;)switch(d){case"hex":a:{if(b=Number(b)||0,d=this.length-b,c?(c=Number(c))>d&&(c=d):c=d,0!=(d=a.length)%2)throw new TypeError("Invalid hex string");for(c>d/2&&(c=d/2),d=0;d<c;++d){if(e=parseInt(a.substr(2*d,2),16),isNaN(e)){a=d;break a}this[b+d]=e}a=d}return a;case"utf8":case"utf-8":return Ac(tc(a,this.length-b),this,b,c);case"ascii":return Ac(Bc(a),this,b,c);case"latin1":case"binary":return Ac(Bc(a),this,b,c);case"base64":return Ac(uc(a),this,b,c);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":d=a,e=this.length-b;for(var f=[],h=0;h<d.length&&!(0>(e-=2));++h){var g=d.charCodeAt(h);a=g>>8,g%=256,f.push(g),f.push(a)}return Ac(f,this,b,c);default:if(e)throw new TypeError("Unknown encoding: "+d);d=(""+d).toLowerCase(),e=!0}},J.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var Cc=4096;J.prototype.slice=function(a,b){var c=this.length;if(0>(a=~~a)?0>(a+=c)&&(a=0):a>c&&(a=c),0>(b=void 0===b?c:~~b)?0>(b+=c)&&(b=0):b>c&&(b=c),b<a&&(b=a),J.TYPED_ARRAY_SUPPORT)(b=this.subarray(a,b)).__proto__=J.prototype;else{b=new J(c=b-a,void 0);for(var d=0;d<c;++d)b[d]=this[d+a]}return b},J.prototype.readUIntLE=function(a,b,c){a|=0,b|=0,c||O(a,b,this.length),c=this[a];for(var d=1,e=0;++e<b&&(d*=256);)c+=this[a+e]*d;return c},J.prototype.readUIntBE=function(a,b,c){a|=0,b|=0,c||O(a,b,this.length),c=this[a+--b];for(var d=1;0<b&&(d*=256);)c+=this[a+--b]*d;return c},J.prototype.readUInt8=function(a,b){return b||O(a,1,this.length),this[a]},J.prototype.readUInt16LE=function(a,b){return b||O(a,2,this.length),this[a]|this[a+1]<<8},J.prototype.readUInt16BE=function(a,b){return b||O(a,2,this.length),this[a]<<8|this[a+1]},J.prototype.readUInt32LE=function(a,b){return b||O(a,4,this.length),(this[a]|this[a+1]<<8|this[a+2]<<16)+16777216*this[a+3]},J.prototype.readUInt32BE=function(a,b){return b||O(a,4,this.length),16777216*this[a]+(this[a+1]<<16|this[a+2]<<8|this[a+3])},J.prototype.readIntLE=function(a,b,c){a|=0,b|=0,c||O(a,b,this.length),c=this[a];for(var d=1,e=0;++e<b&&(d*=256);)c+=this[a+e]*d;return c>=128*d&&(c-=Math.pow(2,8*b)),c},J.prototype.readIntBE=function(a,b,c){a|=0,b|=0,c||O(a,b,this.length),c=b;for(var d=1,e=this[a+--c];0<c&&(d*=256);)e+=this[a+--c]*d;return e>=128*d&&(e-=Math.pow(2,8*b)),e},J.prototype.readInt8=function(a,b){return b||O(a,1,this.length),128&this[a]?-1*(255-this[a]+1):this[a]},J.prototype.readInt16LE=function(a,b){return b||O(a,2,this.length),32768&(a=this[a]|this[a+1]<<8)?4294901760|a:a},J.prototype.readInt16BE=function(a,b){return b||O(a,2,this.length),32768&(a=this[a+1]|this[a]<<8)?4294901760|a:a},J.prototype.readInt32LE=function(a,b){return b||O(a,4,this.length),this[a]|this[a+1]<<8|this[a+2]<<16|this[a+3]<<24},J.prototype.readInt32BE=function(a,b){return b||O(a,4,this.length),this[a]<<24|this[a+1]<<16|this[a+2]<<8|this[a+3]},J.prototype.readFloatLE=function(a,b){return b||O(a,4,this.length),gc(this,a,!0,23,4)},J.prototype.readFloatBE=function(a,b){return b||O(a,4,this.length),gc(this,a,!1,23,4)},J.prototype.readDoubleLE=function(a,b){return b||O(a,8,this.length),gc(this,a,!0,52,8)},J.prototype.readDoubleBE=function(a,b){return b||O(a,8,this.length),gc(this,a,!1,52,8)},J.prototype.writeUIntLE=function(a,b,c,d){a=+a,b|=0,c|=0,d||P(this,a,b,c,Math.pow(2,8*c)-1,0),d=1;var e=0;for(this[b]=255&a;++e<c&&(d*=256);)this[b+e]=a/d&255;return b+c},J.prototype.writeUIntBE=function(a,b,c,d){a=+a,b|=0,c|=0,d||P(this,a,b,c,Math.pow(2,8*c)-1,0);var e=1;for(this[b+(d=c-1)]=255&a;0<=--d&&(e*=256);)this[b+d]=a/e&255;return b+c},J.prototype.writeUInt8=function(a,b,c){return a=+a,b|=0,c||P(this,a,b,1,255,0),J.TYPED_ARRAY_SUPPORT||(a=Math.floor(a)),this[b]=255&a,b+1},J.prototype.writeUInt16LE=function(a,b,c){return a=+a,b|=0,c||P(this,a,b,2,65535,0),J.TYPED_ARRAY_SUPPORT?(this[b]=255&a,this[b+1]=a>>>8):Dc(this,a,b,!0),b+2},J.prototype.writeUInt16BE=function(a,b,c){return a=+a,b|=0,c||P(this,a,b,2,65535,0),J.TYPED_ARRAY_SUPPORT?(this[b]=a>>>8,this[b+1]=255&a):Dc(this,a,b,!1),b+2},J.prototype.writeUInt32LE=function(a,b,c){return a=+a,b|=0,c||P(this,a,b,4,4294967295,0),J.TYPED_ARRAY_SUPPORT?(this[b+3]=a>>>24,this[b+2]=a>>>16,this[b+1]=a>>>8,this[b]=255&a):Ec(this,a,b,!0),b+4},J.prototype.writeUInt32BE=function(a,b,c){return a=+a,b|=0,c||P(this,a,b,4,4294967295,0),J.TYPED_ARRAY_SUPPORT?(this[b]=a>>>24,this[b+1]=a>>>16,this[b+2]=a>>>8,this[b+3]=255&a):Ec(this,a,b,!1),b+4},J.prototype.writeIntLE=function(a,b,c,d){a=+a,b|=0,d||P(this,a,b,c,(d=Math.pow(2,8*c-1))-1,-d),d=0;var e=1,f=0;for(this[b]=255&a;++d<c&&(e*=256);)0>a&&0===f&&0!==this[b+d-1]&&(f=1),this[b+d]=(a/e>>0)-f&255;return b+c},J.prototype.writeIntBE=function(a,b,c,d){a=+a,b|=0,d||P(this,a,b,c,(d=Math.pow(2,8*c-1))-1,-d);var e=1,f=0;for(this[b+(d=c-1)]=255&a;0<=--d&&(e*=256);)0>a&&0===f&&0!==this[b+d+1]&&(f=1),this[b+d]=(a/e>>0)-f&255;return b+c},J.prototype.writeInt8=function(a,b,c){return a=+a,b|=0,c||P(this,a,b,1,127,-128),J.TYPED_ARRAY_SUPPORT||(a=Math.floor(a)),0>a&&(a=255+a+1),this[b]=255&a,b+1},J.prototype.writeInt16LE=function(a,b,c){return a=+a,b|=0,c||P(this,a,b,2,32767,-32768),J.TYPED_ARRAY_SUPPORT?(this[b]=255&a,this[b+1]=a>>>8):Dc(this,a,b,!0),b+2},J.prototype.writeInt16BE=function(a,b,c){return a=+a,b|=0,c||P(this,a,b,2,32767,-32768),J.TYPED_ARRAY_SUPPORT?(this[b]=a>>>8,this[b+1]=255&a):Dc(this,a,b,!1),b+2},J.prototype.writeInt32LE=function(a,b,c){return a=+a,b|=0,c||P(this,a,b,4,2147483647,-2147483648),J.TYPED_ARRAY_SUPPORT?(this[b]=255&a,this[b+1]=a>>>8,this[b+2]=a>>>16,this[b+3]=a>>>24):Ec(this,a,b,!0),b+4},J.prototype.writeInt32BE=function(a,b,c){return a=+a,b|=0,c||P(this,a,b,4,2147483647,-2147483648),0>a&&(a=4294967295+a+1),J.TYPED_ARRAY_SUPPORT?(this[b]=a>>>24,this[b+1]=a>>>16,this[b+2]=a>>>8,this[b+3]=255&a):Ec(this,a,b,!1),b+4},J.prototype.writeFloatLE=function(a,b,c){return c||Fc(this,0,b,4),hc(this,a,b,!0,23,4),b+4},J.prototype.writeFloatBE=function(a,b,c){return c||Fc(this,0,b,4),hc(this,a,b,!1,23,4),b+4},J.prototype.writeDoubleLE=function(a,b,c){return c||Fc(this,0,b,8),hc(this,a,b,!0,52,8),b+8},J.prototype.writeDoubleBE=function(a,b,c){return c||Fc(this,0,b,8),hc(this,a,b,!1,52,8),b+8},J.prototype.copy=function(a,b,c,d){if(c||(c=0),d||0===d||(d=this.length),b>=a.length&&(b=a.length),b||(b=0),0<d&&d<c&&(d=c),d===c||0===a.length||0===this.length)return 0;if(0>b)throw new RangeError("targetStart out of bounds");if(0>c||c>=this.length)throw new RangeError("sourceStart out of bounds");if(0>d)throw new RangeError("sourceEnd out of bounds");d>this.length&&(d=this.length),a.length-b<d-c&&(d=a.length-b+c);var e=d-c;if(this===a&&c<b&&b<d)for(d=e-1;0<=d;--d)a[d+b]=this[d+c];else if(1e3>e||!J.TYPED_ARRAY_SUPPORT)for(d=0;d<e;++d)a[d+b]=this[d+c];else Uint8Array.prototype.set.call(a,this.subarray(c,c+e),b);return e},J.prototype.fill=function(a,b,c,d){if("string"==typeof a){if("string"==typeof b?(d=b,b=0,c=this.length):"string"==typeof c&&(d=c,c=this.length),1===a.length){var e=a.charCodeAt(0);256>e&&(a=e)}if(void 0!==d&&"string"!=typeof d)throw new TypeError("encoding must be a string");if("string"==typeof d&&!J.isEncoding(d))throw new TypeError("Unknown encoding: "+d)}else"number"==typeof a&&(a&=255);if(0>b||this.length<b||this.length<c)throw new RangeError("Out of range index");if(c<=b)return this;if(b>>>=0,c=void 0===c?this.length:c>>>0,a||(a=0),"number"==typeof a)for(d=b;d<c;++d)this[d]=a;else for(e=(a=M(a)?a:tc(new J(a,d).toString())).length,d=0;d<c-b;++d)this[d+b]=a[d%e];return this};var $c,Gc=/[^+\/0-9A-Za-z-_]/g,Ic={DEBUG:!1,QUIET:!1,VERBOSE:!1,defs:{},input_files:[]},Pc=0,Qc={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"},Rc=/^\s+/,Sc=/\s+$/;Vc.prototype.isNull=function(){return!this.mx||!this.my||isNaN(this.bx)||isNaN(this.by)},Vc.prototype.invert=function(){var a=new Vc;return a.mx=1/this.mx,a.my=1/this.my,a.bx=-this.bx/this.mx,a.by=-this.by/this.my,a},Vc.prototype.transform=function(a,b,c){return(c=c||[])[0]=a*this.mx+this.bx,c[1]=b*this.my+this.by,c},Vc.prototype.toString=function(){return JSON.stringify(Object.assign({},this))},U.from=function(){var a=new U;return a.setBounds.apply(a,arguments)},U.prototype.toString=function(){return JSON.stringify({xmin:this.xmin,xmax:this.xmax,ymin:this.ymin,ymax:this.ymax})},U.prototype.toArray=function(){return this.hasBounds()?[this.xmin,this.ymin,this.xmax,this.ymax]:[]},U.prototype.hasBounds=function(){return this.xmin<=this.xmax&&this.ymin<=this.ymax},U.prototype.sameBounds=U.prototype.equals=function(a){return a&&this.xmin===a.xmin&&this.xmax===a.xmax&&this.ymin===a.ymin&&this.ymax===a.ymax},U.prototype.width=function(){return this.xmax-this.xmin||0},U.prototype.height=function(){return this.ymax-this.ymin||0},U.prototype.area=function(){return this.width()*this.height()||0},U.prototype.empty=function(){return this.xmin=this.ymin=this.xmax=this.ymax=void 0,this},U.prototype.setBounds=function(a,b,c,d){return 1==arguments.length&&(w.isArrayLike(a)?(b=a[1],c=a[2],d=a[3],a=a[0]):(b=a.ymin,c=a.xmax,d=a.ymax,a=a.xmin)),this.xmin=a,this.ymin=b,this.xmax=c,this.ymax=d,(a>c||b>d)&&this.update(),this},U.prototype.centerX=function(){return.5*(this.xmin+this.xmax)},U.prototype.centerY=function(){return.5*(this.ymax+this.ymin)},U.prototype.containsPoint=function(a,b){return a>=this.xmin&&a<=this.xmax&&b<=this.ymax&&b>=this.ymin},U.prototype.containsBufferedPoint=U.prototype.containsCircle=function(a,b,c){return a+c>this.xmin&&a-c<this.xmax&&b-c<this.ymax&&b+c>this.ymin},U.prototype.intersects=function(a){return a.xmin<=this.xmax&&a.xmax>=this.xmin&&a.ymax>=this.ymin&&a.ymin<=this.ymax},U.prototype.contains=function(a){return a.xmin>=this.xmin&&a.ymax<=this.ymax&&a.xmax<=this.xmax&&a.ymin>=this.ymin},U.prototype.shift=function(a,b){this.setBounds(this.xmin+a,this.ymin+b,this.xmax+a,this.ymax+b)},U.prototype.padBounds=function(a,b,c,d){this.xmin-=a,this.ymin-=b,this.xmax+=c,this.ymax+=d},U.prototype.scale=function(a,b){var c=.5*(this.xmax-this.xmin),d=.5*(this.ymax-this.ymin);--a,b=void 0===b?a:b-1,this.xmin-=c*a,this.ymin-=d*b,this.xmax+=c*a,this.ymax+=d*b},U.prototype.cloneBounds=U.prototype.clone=function(){return new U(this.xmin,this.ymin,this.xmax,this.ymax)},U.prototype.clearBounds=function(){this.setBounds(new U)},U.prototype.mergePoint=function(a,b){void 0===this.xmin?this.setBounds(a,b,a,b):(a<this.xmin?this.xmin=a:a>this.xmax&&(this.xmax=a),b<this.ymin?this.ymin=b:b>this.ymax&&(this.ymax=b))},U.prototype.fillOut=function(a,b,c){3>arguments.length&&(c=b=.5);var d=this.width(),e=this.height(),f=d/e;return isNaN(a)||0>=a||(f<a?(d=e*a-d,this.xmin-=(1-b)*d,this.xmax+=b*d):(d=d/a-e,this.ymin-=(1-c)*d,this.ymax+=c*d)),this},U.prototype.update=function(){if(this.xmin>this.xmax){var a=this.xmin;this.xmin=this.xmax,this.xmax=a}this.ymin>this.ymax&&(a=this.ymin,this.ymin=this.ymax,this.ymax=a)},U.prototype.transform=function(a){return this.xmin=this.xmin*a.mx+a.bx,this.xmax=this.xmax*a.mx+a.bx,this.ymin=this.ymin*a.my+a.by,this.ymax=this.ymax*a.my+a.by,this.update(),this},U.prototype.getTransform=function(a,b){var c=new Vc;return c.mx=a.width()/this.width()||1,c.bx=a.xmin-c.mx*this.xmin,b?(c.my=-a.height()/this.height()||1,c.by=a.ymax-c.my*this.ymin):(c.my=a.height()/this.height()||1,c.by=a.ymin-c.my*this.ymin),c},U.prototype.mergeCircle=function(a,b,c){0>c&&(c=-c),this.mergeBounds([a-c,b-c,a+c,b+c])},U.prototype.mergeBounds=function(a){if(a instanceof U)var b=a.xmin,c=a.ymin,d=a.xmax,e=a.ymax;else 4==arguments.length?(b=arguments[0],c=arguments[1],d=arguments[2],e=arguments[3]):4==a.length?(b=a[0],c=a[1],d=a[2],e=a[3]):Q("Bounds#mergeBounds() invalid argument:",a);return void 0===this.xmin?this.setBounds(b,c,d,e):(b<this.xmin&&(this.xmin=b),c<this.ymin&&(this.ymin=c),d>this.xmax&&(this.xmax=d),e>this.ymax&&(this.ymax=e)),this},$c=function(){function a(d,e,f,h){b+=c(f[d],h[d],f[e],h[e])}var b,c;return function(d,e,f){f&&e.isPlanar()&&Q("Expected lat-long coordinates"),c=f?Yb:Sb,f=b=0;for(var h=d.length;f<h;f++)e.forEachArcSegment(d[f],a);return b}}();var Fd,ad=Object.freeze({__proto__:null,pathIsClosed:function(a,b){var c=a[a.length-1];return a=b.getVertex(a[0],0),b=b.getVertex(c,-1),a.x===b.x&&a.y===b.y},getPointToPathDistance:Wc,getPointToPathInfo:Xc,getPointToShapeDistance:function(a,b,c,d){return(c||[]).reduce((function(e,f){return f=Wc(a,b,f,d),Math.min(e,f)}),1/0)},getAvgPathXY:Yc,getMaxPath:Zc,countVerticesInPath:function(a,b){for(a=b.getShapeIter(a),b=0;a.hasNext();)b++;return b},getPathBounds:function(a){for(var b=new U,c=0,d=a.length;c<d;c++)b.mergePoint(a[c][0],a[c][1]);return b},get calcPathLen(){return $c}}),cd=Object.freeze({__proto__:null,getShapeCentroid:function(a,b){return(a=Zc(a,b))?bd(a,b):null},getPathCentroid:bd}),ud=Object.freeze({__proto__:null,calcPolsbyPopperCompactness:function(a,b){return 0>=b?0:Math.abs(a)*Math.PI*4/(b*b)},calcSchwartzbergCompactness:function(a,b){return 0>=b?0:2*Math.PI*Math.sqrt(Math.abs(a)/Math.PI)/b},getPathWinding:function(a,b){return(0<(a=nd(a,b))?1:0>a&&-1)||0},getShapeArea:function(a,b){return(a||[]).reduce((function(c,d){return c+nd(d,b)}),0)},getPlanarShapeArea:function(a,b){return(a||[]).reduce((function(c,d){return c+od(d,b)}),0)},getSphericalShapeArea:function(a,b){return b.isPlanar()&&Q("[getSphericalShapeArea()] Function requires decimal degree coordinates"),(a||[]).reduce((function(c,d){return c+pd(d,b)}),0)},testPointInPolygon:function(a,b,c,d){var e=!1,f=!1;return c&&c.forEach((function(h){1==(h=kd(a,b,h,d))?e=!e:-1==h&&(f=!0)})),f||e},testPointInRing:kd,testRayIntersection:ld,getRayIntersection:md,getPathArea:nd,getSphericalPathArea:pd,getSphericalPathArea2:qd,getPlanarPathArea2:function(a){for(var c,d,e,f,h,g,l,b=0,n=0,p=a.length;n<p;n++)l=a[n],0===n?(d=c=0,h=-l[0],g=-l[1]):b+=(c=l[0]+h)*f-e*(d=l[1]+g),e=c,f=d;return b/2},getPlanarPathArea:od,getPathPerimeter:rd,getShapePerimeter:function(a,b){return(a||[]).reduce((function(c,d){return c+rd(d,b)}),0)},getSphericalShapePerimeter:function(a,b){return b.isPlanar()&&Q("[getSphericalShapePerimeter()] Function requires decimal degree coordinates"),(a||[]).reduce((function(c,d){return c+td(d,b)}),0)},getPlanarPathPerimeter:sd,getSphericalPathPerimeter:td}),Cd=Object.freeze({__proto__:null,segmentIntersection:function(a,b,c,d,e,f,h,g,l){var r,n=0<=l?l:1e-14*Math.max.apply(null,[a,b,c,d,e,f,h,g].map(Math.abs)),p=n*n;if(xd(l=[],p,a,b,e,f,h,g),xd(l,p,c,d,e,f,h,g),xd(l,p,e,f,a,b,c,d),xd(l,p,h,g,a,b,c,d),(r=!(l=0===l.length?null:l))&&(r=z(a,b,e,f)<=p||z(a,b,h,g)<=p||z(c,d,e,f)<=p||z(c,d,h,g)<=p),r)return null;if(Bd(a,b,c,d,e,f,h,g))if(r=(c-a)*(g-f)-(d-b)*(h-e),p=[a+(p=Ad(e,f,h,g,a,b)/r)*(c-a),b+p*(d-b)],1e-18>Math.abs(r))a=null;else{if(0<n){r=p[0];var u=p[1];n=yd(p,n,r,u,a,b),n=yd(p,n,r,u,c,d),n=yd(p,n,r,u,e,f),yd(p,n,r,u,h,g)}n=p[0],r=p[1],n=zd(n,a,c),n=zd(n,e,h),r=zd(r,b,d),r=zd(r,f,g),p[0]=n,p[1]=r,a=p}else a=null;return l||a||null},findClosestPointOnSeg:function(a,b,c,d,e,f){var h=e-c,g=f-d,l=h*h+g*g;return.1>=(a=0===l?-1:((a-c)*h+(b-d)*g)/l)?[c,d]:.9<=a?[e,f]:[c+a*h,d+a*g]},orient2D:Ad,segmentHit:Bd}),V=Object.assign({},bc,ud,ad,Cd,cd),X={getArcCalculator:function(a,b){var c=new Sd,d=w.expandoBuffer(Int32Array),e=w.expandoBuffer(Int32Array),f=b?function(h,g,l,n,p,r){return a(n[h],p[h],r[h],n[g],p[g],r[g],n[l],p[l],r[l])}:function(h,g,l,n,p){return a(n[h],p[h],n[g],p[g],n[l],p[l])};return function(h,g,l,n){var x,p=h.length,r=d(p),u=e(p),t=-1/0;for(n&&!b?Q("[visvalingam] Received z-axis data for 2D simplification"):!n&&b?Q("[visvalingam] Missing z-axis data for 3D simplification"):h.length>g.length&&Q("[visvalingam] Incompatible data arrays:",h.length,g.length),x=0;x<p;x++){var A=x-1,y=x+1,k=0>A||y>=p?1/0:f(A,x,y,g,l,n);h[x]=k,u[x]=y,r[x]=A}for(c.init(h);0<c.size()&&1/0!==(k=h[x=c.pop()]);)k<t?h[x]=t:t=k,A=r[x],y=u[x],0<A&&(k=f(r[A],A,y,g,l,n),c.updateValue(A,k)),y<p-1&&(k=f(A,y,u[y],g,l,n),c.updateValue(y,k)),u[A]=y,r[y]=A}}};X.standardMetric=V.triangleArea,X.standardMetric3D=V.triangleArea3D,X.getWeightedMetric=function(a){var b=X.getWeightFunction(a);return function(c,d,e,f,h,g){var l=V.triangleArea(c,d,e,f,h,g);return c=V.cosine(c,d,e,f,h,g),b(c)*l}},X.getWeightedMetric3D=function(a){var b=X.getWeightFunction(a);return function(c,d,e,f,h,g,l,n,p){var r=V.triangleArea3D(c,d,e,f,h,g,l,n,p);return c=V.cosine3D(c,d,e,f,h,g,l,n,p),b(c)*r}},X.getWeightCoefficient=function(a){return a&&w.isNumber(a&&a.weighting)?a.weighting:.7},X.getWeightFunction=function(a){var b=X.getWeightCoefficient(a);return function(c){return-c*b+1}},X.weight=function(a){return.7*-a+1},X.getEffectiveAreaSimplifier=function(a){return X.getPathSimplifier(a?X.standardMetric3D:X.standardMetric,a)},X.getWeightedSimplifier=function(a,b){return a=b?X.getWeightedMetric3D(a):X.getWeightedMetric(a),X.getPathSimplifier(a,b)},X.getPathSimplifier=function(a,b){return X.scaledSimplify(X.getArcCalculator(a,b))},X.scaledSimplify=function(a){return function(b,c,d,e){for(a(b,c,d,e),c=1,d=b.length-1;c<d;c++)b[c]=.65*Math.sqrt(b[c])}};var Y={ID_FIELD:"FID",typeLookup:{LineString:"polyline",MultiLineString:"polyline",Polygon:"polygon",MultiPolygon:"polygon",Point:"point",MultiPoint:"point"},translateGeoJSONType:function(a){return Y.typeLookup[a]||null},pathIsRing:function(a){var b=a[0],c=a[a.length-1];return 4<=a.length&&b[0]==c[0]&&b[1]==c[1]}},ie=function he(a){var b=null;return"utf8"!=(a=(a||"").toLowerCase().replace(/[_-]/g,""))?null:("undefined"!=typeof TextEncoder&&(b=new TextEncoder(a)),function(c){return b?J.from(b.encode(c).buffer):w.createBuffer(c,a)})}("utf8");!function je(a){"utf8"!=(a=(a||"").toLowerCase().replace(/[_-]/g,""))||"undefined"!=typeof TextDecoder&&new TextDecoder(a)}("utf8"),ne.prototype={fieldExists:function(a){return w.contains(this.getFields(),a)},toString:function(){return JSON.stringify(this)},toJSON:function(){return this.getRecords()},addField:function(a,b){var c=w.isFunction(b);w.isNumber(b)||w.isString(b)||c||Q("DataTable#addField() requires a string, number or function for initialization"),this.fieldExists(a)&&Q("DataTable#addField() tried to add a field that already exists:",a),this.getRecords().forEach((function(d,e){d[a]=c?b(d,e):b}))},getRecordAt:function(a){return this.getRecords()[a]},addIdField:function(){this.addField("FID",(function(a,b){return b}))},deleteField:function(a){this.getRecords().forEach((function(b){delete b[a]}))},getFields:function(){var a=this.getRecords();a:{for(var b=0,c=a?a.length:0;b<c;b++)if(a[b]){a=a[b];break a}a=null}return function me(a,b){return"ascending"==b&&a.sort((function(c,d){return c.toLowerCase()<d.toLowerCase()?-1:1})),a}(a=a?Object.keys(a):[],void 0)},isEmpty:function(){return 0===this.getFields().length||0===this.size()},update:function(a){for(var b=this.getRecords(),c=0,d=b.length;c<d;c++)b[c]=a(b[c],c)},clone:function(){return new ne(this.getRecords().map(ke))},size:function(){return this.getRecords().length}},xe.prototype.init=function(a,b,c){return c?(this._i=a,this._inc=1):(this._i=a+b-1,this._inc=-1),this._n=b,this},xe.prototype.hasNext=function(){var a=this._i;return 0<this._n&&(this._i=a+this._inc,this.x=this._xx[a],this.y=this._yy[a],this.i=a,this._n--,!0)},ze.prototype.hasNext=function(){var a=this._arc;return 0!=this._i<this._n&&(a.hasNext()?(this.x=a.x,this.y=a.y,!0):(this.nextArc(),this.hasNext()))},ze.prototype.init=function(a){return this._ids=a,this._n=a.length,this.reset(),this},ze.prototype.nextArc=function(){var a=this._i+1;a<this._n&&(this._arc=this._arcs.getArcIter(this._ids[a]),0<a&&this._arc.hasNext()),this._i=a},ze.prototype.reset=function(){this._i=-1,this.nextArc()};var Ee={robinson:"+proj=robin +datum=WGS84",webmercator:"+proj=merc +a=6378137 +b=6378137",wgs84:"+proj=longlat +datum=WGS84"},Ie={m:"meters",meter:"meters",meters:"meters",mi:"miles",mile:"miles",miles:"miles",km:"kilometers",ft:"feet",feet:"feet"},Je={meters:1,kilometers:1e3,feet:.3048,miles:1609.344};Y.importGeometry=function(a,b,c){var d=a.type;d in Y.pathImporters?c.geometry_type&&c.geometry_type!=Y.translateGeoJSONType(d)||Y.pathImporters[d](a.coordinates,b):"GeometryCollection"==d?a.geometries.forEach((function(e){Y.importGeometry(e,b,c)})):Oc("GeoJSON.importGeometry() Unsupported geometry type:",a.type)},Y.pathImporters={LineString:function(a,b){b.importLine(a)},MultiLineString:function(a,b){for(var c=0;c<a.length;c++)Y.pathImporters.LineString(a[c],b)},Polygon:function(a,b){for(var c=0;c<a.length;c++)b.importRing(a[c],0<c)},MultiPolygon:function(a,b){for(var c=0;c<a.length;c++)Y.pathImporters.Polygon(a[c],b)},Point:function(a,b){b.importPoints([a])},MultiPoint:function(a,b){b.importPoints(a)}},Y.formatCollectionAsNDJSON=function(a){var b=w.createBuffer("\n","utf8");return a=a.reduce((function(c,d,e){return 0<e&&c.push(b),c.push(d),c}),[]),J.concat(a)},Y.formatCollection=function(a,b){return a=JSON.stringify(a).replace(/\}$/,', "'+rf(a.type)+'": [\n'),w.isString(b[0])?a+b.join(",\n")+"\n]}":Y.joinOutputBuffers(a,"\n]}",b)},Y.joinOutputBuffers=function(a,b,c){var d=w.createBuffer(",\n","utf8");return(a=c.reduce((function(e,f,h){return 0<h&&e.push(d),e.push(f),e}),[w.createBuffer(a,"utf8")])).push(w.createBuffer(b,"utf8")),J.concat(a)},Y.exportPointGeom=function(a){var b=null;return 1==a.length?b={type:"Point",coordinates:a[0]}:1<a.length&&(b={type:"MultiPoint",coordinates:a}),b},Y.exportLineGeom=function(a,b){return 0===(a=Ye(a,b,"polyline")).pointCount?null:1==(a=a.pathData.map((function(c){return c.points}))).length?{type:"LineString",coordinates:a[0]}:{type:"MultiLineString",coordinates:a}},Y.exportPolygonGeom=function(a,b,c){if(0===(a=Ye(a,b,"polygon")).pointCount)return null;b=function We(a,b,c){var d=[],e=[],f=c?-1:1;if((a||[]).forEach((function(g){0<g.area*f?e.push([g]):0>g.area*f&&d.push(g)})),0===d.length)return e;var h=function Ve(a){function b(d){return a[d]}if(!a.length)return function(){return[]};var c=new(require("flatbush"))(a.length);return a.forEach((function(d){d=d.bounds,c.add(d.xmin,d.ymin,d.xmax,d.ymax)})),c.finish(),function(d,e,f,h){return c.search(d,e,f,h).map(b)}}(e.map((function(g,l){return{bounds:g[0].bounds,idx:l}})));return d.forEach((function(g){for(var u,t,x,A,l=-1,n=0,p=g.area*-f,r=g.bounds,y=0,k=(r=h(r.xmin,r.ymin,r.xmax,r.ymax)).length;y<k;y++){var m;if(t=r[y].idx,x=(u=e[t][0]).area*f,m=(A=u.bounds.contains(g.bounds)&&x>p)&&1<r.length){m=g;var q=b;!1===u.bounds.contains(m.bounds)?m=!1:(m=q.getVertex(m.ids[0],0),m=1==V.testPointInRing(m.x,m.y,u.ids,q)),m=!m}!m&&A&&(0===n||x<n)&&(n=x,l=t)}-1!=l&&e[l].push(g)})),e}(a.pathData,b,c.invert_y);var d=(c.rfc7946||c.v2)&&!c.invert_y;return 1==(c=b.map((function(e){return e.map((function(f){return d&&f.points.reverse(),f.points}))}))).length?{type:"Polygon",coordinates:c[0]}:{type:"MultiPolygon",coordinates:c}},Y.exporters={polygon:Y.exportPolygonGeom,polyline:Y.exportLineGeom,point:Y.exportPointGeom};export{preBuild,simplify};
