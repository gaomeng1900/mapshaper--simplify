/*
 The buffer module from node.js, for the browser.

 @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 @license  MIT
*/
function Rb(t,n,e,r){for(var i,o,a=e+2;a<=r;a+=2){i=n[a],o=n[a+1];for(var u=a-2;u>=e&&t[i]<t[n[u]];u-=2)n[u+2]=n[u],n[u+3]=n[u+1];n[u+2]=i,n[u+3]=o}}function Sb(t,n,e,r){for(var i,o,a=e,u=r;a<r;){for(i=t[n[e+r>>2<<1]];a<=u;){for(;t[n[a]]<i;)a+=2;for(;t[n[u]]>i;)u-=2;a<=u&&(o=n[a],n[a]=n[u],n[u]=o,o=n[a+1],n[a+1]=n[u+1],n[u+1]=o,a+=2,u-=2)}if(40>u-e?Rb(t,n,e,u):Sb(t,n,e,u),40>r-a){Rb(t,n,a,r);break}e=a,u=r}}function Ub(t,n,e,r,i,o){return t-=r,n-=i,e-=o,Math.sqrt(t*t+n*n+e*e)}function y(t,n,e,r){return(t-=e)*t+(n-=r)*n}function E(t,n,e,r){return t-=e,n-=r,Math.sqrt(t*t+n*n)}function Vb(){}function Wb(){}function Xb(){}function Yb(t,n,e){t*=Tb,n*=Tb;var r=Math.cos(n);e[0]=Math.cos(t)*r*6378137,e[1]=Math.sin(t)*r*6378137,e[2]=6378137*Math.sin(n)}function Zb(){}function $b(){}function ac(t,n,e,r,i,o){return(t=t*r-t*o+e*o-e*n+i*n-i*r)*t}function bc(){}function cc(t,n,e,r,i,o){var a=y(e,r,i,o),u=((t-e)*(i-e)+(n-r)*(o-r))/a;return 0===a?y(t,n,e,r):(0>u&&(u=0),1<u&&(u=1),y(t,n,e+u*(i-e),r+u*(o-r)))}function gc(){}function hc(){}function ic(){}function jc(){}function L(t,n){if((J.TYPED_ARRAY_SUPPORT?2147483647:1073741823)<n)throw new RangeError("Invalid typed array length");return J.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(n)).__proto__=J.prototype:(null===t&&(t=new J(n)),t.length=n),t}function J(t,n,e){if(!(J.TYPED_ARRAY_SUPPORT||this instanceof J))return new J(t,n,e);if("number"==typeof t){if("string"==typeof n)throw Error("If encoding is specified then the first argument must be a string");return mc(this,t)}return nc(this,t,n,e)}function nc(t,n,e,r){if("number"==typeof n)throw new TypeError('"value" argument must not be a number');if("undefined"!=typeof ArrayBuffer&&n instanceof ArrayBuffer){if(n.byteLength,0>e||n.byteLength<e)throw new RangeError("'offset' is out of bounds");if(n.byteLength<e+(r||0))throw new RangeError("'length' is out of bounds");return n=void 0===e&&void 0===r?new Uint8Array(n):void 0===r?new Uint8Array(n,e):new Uint8Array(n,e,r),J.TYPED_ARRAY_SUPPORT?(t=n).__proto__=J.prototype:t=oc(t,n),t}if("string"==typeof n){if(r=t,"string"==typeof(t=e)&&""!==t||(t="utf8"),!J.isEncoding(t))throw new TypeError('"encoding" must be a valid string encoding');return(n=(r=L(r,e=0|pc(n,t))).write(n,t))!==e&&(r=r.slice(0,n)),r}}function rc(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(0>t)throw new RangeError('"size" argument must not be negative')}function mc(t,n){if(rc(n),t=L(t,0>n?0:0|sc(n)),!J.TYPED_ARRAY_SUPPORT)for(var e=0;e<n;++e)t[e]=0;return t}function oc(){}function sc(t){if(t>=(J.TYPED_ARRAY_SUPPORT?2147483647:1073741823))throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+(J.TYPED_ARRAY_SUPPORT?2147483647:1073741823).toString(16)+" bytes");return 0|t}function M(t){return!(null==t||!t._isBuffer)}function pc(t,n){if(M(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function "==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var e=t.length;if(0===e)return 0;for(var r=!1;;)switch(n){case"ascii":case"latin1":case"binary":return e;case"utf8":case"utf-8":case void 0:return uc(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*e;case"hex":return e>>>1;case"base64":return vc(t).length;default:if(r)return uc(t).length;n=(""+n).toLowerCase(),r=!0}}function wc(){}function yc(){}function zc(){}function Ac(){}function xc(){}function N(){}function O(){}function Ec(){}function Fc(){}function Gc(){}function uc(t,n){n=n||1/0;for(var e,r=t.length,i=null,o=[],a=0;a<r;++a){if(55295<(e=t.charCodeAt(a))&&57344>e){if(!i){if(56319<e){-1<(n-=3)&&o.push(239,191,189);continue}if(a+1===r){-1<(n-=3)&&o.push(239,191,189);continue}i=e;continue}if(56320>e){-1<(n-=3)&&o.push(239,191,189),i=e;continue}e=65536+(i-55296<<10|e-56320)}else i&&-1<(n-=3)&&o.push(239,191,189);if(i=null,128>e){if(0>--n)break;o.push(e)}else if(2048>e){if(0>(n-=2))break;o.push(e>>6|192,63&e|128)}else if(65536>e){if(0>(n-=3))break;o.push(e>>12|224,e>>6&63|128,63&e|128)}else{if(!(1114112>e))throw Error("Invalid code point");if(0>(n-=4))break;o.push(e>>18|240,e>>12&63|128,e>>6&63|128,63&e|128)}}return o}function Cc(){}function vc(){}function Bc(t,n,e,r){for(var i=0;i<r&&!(i+e>=n.length||i>=t.length);++i)n[i+e]=t[i];return i}function Ic(){}function Kc(){}function Lc(){}function Nc(){}function S(){}function T(){}function Oc(){var t=Nc.apply,n=u.toArray(arguments),e=Jc.current_command;e&&"help"!=e&&n.unshift("["+e+"]"),t.call(Nc,null,n)}function U(){(Jc.VERBOSE||Jc.verbose)&&Oc.apply(null,arguments)}function Mc(){}function ca(){}function da(){}function ea(){}function fa(t,n,e){return t<n?n:t>e?e:t}function ha(t){return Array.isArray(t)}function ma(t){return null!=t&&t.constructor==Number}function na(t){return ma(t)&&!isNaN(t)}function oa(t){return na(t)&&1/0!==t&&-1/0!==t}function pa(){}function qa(t){return ma(t)&&(0|t)===t}function ra(t){return null!=t&&t.toString===String.prototype.toString}function sa(){}function ta(){}function ua(){}function va(t){wa(t)||S("toArray() requires an array-like object");try{var n=Array.prototype.slice.call(t,0)}catch(i){n=[];for(var e=0,r=t.length;e<r;e++)n[e]=t[e]}return n}function wa(t){return!!t&&(!!ha(t)||!ra(t)&&(0===t.length||0<t.length))}function xa(){}function ya(){}function za(){}function Aa(t){for(var n=1,e=arguments.length;n<e;n++){var r,i=arguments[n]||{};for(r in i)0==r in t&&i.hasOwnProperty(r)&&(t[r]=i[r])}return t}function Ba(t){var n,e,r=t||{},i=arguments.length;for(e=1;e<i;e++){var o=arguments[e]||{};for(n in o)o.hasOwnProperty(n)&&(r[n]=o[n])}return r}function Ca(){}function Da(){}function Ea(){}function Fa(){}function Ga(){}function Ha(t,n){for(var e=n!=n,r=0,i=t.length||0;r<i;r++)if(t[r]===n||e&&t[r]!=t[r])return r;return-1}function Ja(t,n){return ra(t)?-1!=t.indexOf(n):wa(t)?-1!=Ha(t,n):void S("Expected Array or String argument")}function Ka(t,n){return t.reduce((function(t,e){return t||n(e)}),!1)}function La(){}function Ma(t,n,e){return 0===(t=t.filter(n,e)).length?null:t[0]}function Na(){}function Oa(){}function Pa(t,n){wa(t)||S("sum() expects an array, received:",t);for(var e,r=0,i=0,o=0,a=t.length;o<a;o++)(e=t[o])?r+=e:isNaN(e)&&i++;return n&&(n.nan=i),r}function Qa(){}function Ra(){}function Sa(){}function Ta(){}function Ua(){}function Va(){}function Wa(){}function Xa(t,n,e){if(!wa(t))throw Error("#forEach() takes an array-like argument. "+t);for(var r=0,i=t.length;r<i;r++)n.call(e,t[r],r)}function Ya(){}function Za(t,n){for(var e=0,r=t.length;e<r;e++)t[e]=n;return t}function $a(){}function ab(){}function bb(t){return 1!=t?"s":""}function cb(){}function db(){}function eb(){}function fb(){}function gb(){}function hb(){}function ib(t){var n="",e="-"==t[0]?1:0,r=t.indexOf("."),i=t.length;for(r=(-1==r?i:r)-3;r>e;)n=","+t.substring(r,i)+n,i=r,r-=3;return t.substring(0,i)+n}function jb(t,n){return 0<=n?t.toFixed(n):String(t)}function kb(){}function lb(){}function mb(t){for(var n=[],e=1;e<arguments.length;e+=2)n.push(rb(arguments[e],arguments[e+1]));return t.sort((function(t,e){for(var r=0,i=0,o=n.length;i<o&&0===r;)r=n[i](t,e),i++;return r})),t}function nb(){}function ob(){}function pb(){}function qb(){}function rb(t,n){var e=sb(n);return function(n,r){return e(n[t],r[t])}}function sb(t){return t=!1!==t,function(n,e){var r=0;return null==e?r=null==n?0:-1:null==n?r=1:n<e?r=t?-1:1:n>e?r=t?1:-1:n!=n?r=1:e!=e&&(r=-1),r}}function tb(){}function ub(){}function vb(){}function wb(){}function xb(t,n){(!t.length||1>n||n>t.length)&&S("[findValueByRank()] invalid input"),n=fa(0|n,1,t.length),--n;for(var e,r,i,o,a=0,u=t.length-1;a<u;){i=t[n],e=a,r=u;do{for(;t[e]<i;)e++;for(;i<t[r];)r--;e<=r&&(o=t[e],t[e]=t[r],t[r]=o,e++,r--)}while(e<=r);r<n&&(a=e),n<e&&(u=r)}return t[n]}function yb(){}function zb(){}function Ab(t){return Bb(t).apply(null,Array.prototype.slice.call(arguments,1))}function Bb(t){for(var n=/%([',+0]*)([1-9]?)((?:\.[1-9])?)([sdifxX%])/g,e=[],r=[],i=0,o="",a=n.exec(t);a;)i=t.substring(i,n.lastIndex-a[0].length),"%%"==a[0]?o+=i+"%":(e.push(o+i),o="",r.push(a)),i=n.lastIndex,a=n.exec(t);return e.push(o+t.substr(i)),function(){var n=e[0],i=arguments.length;i!=r.length&&S("[format()] Data does not match format string; format:",t,"data:",arguments);for(var o=0;o<i;o++){var a=void 0,u=void 0,f=void 0,c=arguments[o],s=r[o],l=s[1],h=s[2],p=s[3]?parseInt(s[3].substr(1)):void 0,g=s[4],d="s"==g,y="x"==g||"X"==g,m="d"==g||"i"==g,v=!d;s="";var b=0,x=!1;d?f=String(c):y?(f=c.toString(16),"X"==g&&(f=f.toUpperCase())):v&&("-"==(f=jb(c,m?0:p))[0]&&(x=!0,f=f.substr(1)),c=0==parseFloat(f),-1==l.indexOf("'")&&-1==l.indexOf(",")||(f=ib(f)),c||(x?s="âˆ’":-1!=l.indexOf("+")&&(s="+"))),h&&(c=f.length+s.length)<(h=parseInt(h,10))&&(b=h-c,a=ab(u=-1==l.indexOf("0")?" ":"0",b)),n+=(f=0==b?s+f:"0"==u?s+a+f:a+s+f)+e[o+1]}return n}}function Cb(){}function Db(t,n){return qa(t)?J.allocUnsafe?J.allocUnsafe(t):new J(t):J.from&&J.allocUnsafe?J.from(t,n):new J(t,n)}function Eb(t,n){var e,r=0,i=1<=n?n:1.2;return function(n){return n>r&&(r=Math.ceil(n*i),e=t?new t(r):Db(r)),e}}function Fb(t,n,e,r,i,o){t===e&&r>n&&S("copy error");var a=1,u=0;for(o&&(a=-1,u=i-1),o=0;o<i;o++,u+=a)e[o+r]=t[n+u]}function Gb(t,n,e){return e=e||t.length,n=new t.constructor(Math.max(t.length,n)),Fb(t,0,n,0,e),n}function Hb(){}function Ib(){}function Jb(t){var n=0<(t=String(t)).indexOf("%")?Number(t.replace("%",""))/100:Number(t);return 0<=n&&1>=n||T(Ab("Invalid percentage: %s",t)),n}function Kb(){}function Lb(){}function Mb(){}function Nb(){}function Ob(){}function Tc(){}function Pb(){}function Uc(){}function Qb(){}function Vc(){}function V(){0<arguments.length&&this.setBounds.apply(this,arguments)}function Wc(){}function Xc(){}function Yc(){}function Zc(){}function bd(){}function dd(){}function fd(){}function hd(t,n,e,r){var i=0,o=-1;if(e>r){var a=e;e=r,r=a}for(a=e+1;a<r;a++)(e=t[a])<n&&e>i&&(o=a,i=e);return o}function gd(){}function kd(){}function ld(){}function md(){}function nd(){}function pd(){}function qd(){}function od(t,n){var e,r;if(t=n.getShapeIter(t),n=0,t.hasNext()){var i=e=0,o=-t.x;for(r=-t.y;t.hasNext();){var a=e,u=i;n+=(e=t.x+o)*u-a*(i=t.y+r)}}return n/2}function rd(){}function sd(){}function td(){}function vd(t,n){var e=function(t){var n=0;return t=t.forEachSegment((function(t,e,r,i){r=r[t]-r[e],t=i[t]-i[e],n+=Math.sqrt(r*r+t*t)})),n/t||0}(t),r=.0025*e;0<n&&(r=n,Oc(u.format("Applying snapping threshold of %s -- %.6f times avg. segment length",n,n/e))),n=r;var i=0;if(e=t.getVertexData(),0<n){var o=e.xx,a=o.length;r=new Uint32Array(a);for(var f=0;f<a;f++)r[f]=f;for(wd(o,r,0,r.length-1),o=0,a=r.length;o<a;o++){for(var c,s,l=n,h=r,p=e.xx,g=e.yy,d=o,y=h.length,m=p[h[o]],v=g[h[o]],b=0;++d<y&&!((c=p[s=h[d]]-m)>l);)f=g[s]-v,0===c&&0===f||c*c+f*f>l*l||(p[s]=m,g[s]=v,b++);i+=b}}0<(n=i)&&t.dedupCoords(),Oc(u.format("Snapped %s point%s",n,u.pluralSuffix(n)))}function wd(t,n,e,r){if(24<r-e){for(var i,o=t[n[e+r>>1]],a=e,u=r;a<=u;){for(;t[n[a]]<o;)a++;for(;t[n[u]]>o;)u--;a<=u&&(i=n[a],n[a]=n[u],n[u]=i,a++,u--)}u>e&&wd(t,n,e,u),a<r&&wd(t,n,a,r)}else for(u=e+1;u<=r;u++){for(o=n[u],a=u-1;a>=e&&t[o]<t[n[a]];a--)n[a+1]=n[a];n[a+1]=o}}function xd(t,n,e,r,i,o,a,u){cc(e,r,i,o,a,u)>n||(i=y(i,o,e,r),a=y(a,u,e,r),i<=n||a<=n||t.push(e,r))}function yd(t,n,e,r,i,o){return(e=E(e,r,i,o))<n&&(n=e,t[0]=i,t[1]=o),n}function zd(t,n,e){return(n<e?t<n||t>e:n>e?t>n||t<e:t!=n)&&(t=Math.abs(t-n)<Math.abs(t-e)?n:e),t}function Ad(t,n,e,r,i,o){return(t-i)*(r-o)-(n-o)*(e-i)}function Bd(t,n,e,r,i,o,a,u){return 0>=Ad(t,n,e,r,i,o)*Ad(t,n,e,r,a,u)&&0>=Ad(i,o,a,u,t,n)*Ad(i,o,a,u,e,r)}function Dd(t){return[-180+(t=u.isFiniteNumber(t)?t:1e-10),-90+t,180-t,90-t]}function Ed(t){var n=Dd(-1);return t=t instanceof V?t.toArray():t,W.containsBounds(n,t)}function Hd(t,n){n=u.extend({},n);var e=t.getBounds();!t.isPlanar()&&W.containsBounds(Dd(),e.toArray());var r=e.ymin,i=e.ymax-r,o=n.stripes||function(t){return t=t.getFilteredPointCount()-t.size(),0<(t=Math.ceil(Math.pow(10*t,.6)/40))?t:1}(t),a=new Uint32Array(o),f=1<o&&0<i?function(t){return Math.floor((o-1)*(t-r)/i)}:function(){};0==0<=n.tolerance&&(n.tolerance=1e-14*Math.max.apply(null,e.toArray().map(Math.abs))),t.forEachSegment((function(t,n,e,r){for(t=f(r[t]),n=f(r[n]);a[t]+=2,t!=n;)t+=n>t?1:-1}));var c=function(t){var n=4*t;return(!Fd||Fd.byteLength<n)&&(Fd=new ArrayBuffer(n)),new Uint32Array(Fd,0,t)}(u.sum(a)),s=0,l=[];u.forEach(a,(function(t){var n=s;s+=t,l.push(c.subarray(n,s))})),u.initializeArray(a,0),t.forEachSegment((function(t,n,e,r){e=f(r[t]),r=f(r[n]);for(var i,o;i=a[e],a[e]=i+2,(o=l[e])[i]=t,o[i+1]=n,e!=r;)e+=r>e?1:-1}));var h=t.getVertexData(),p=[];for(t=0;t<o;t++){var g=Jd(l[t],h.xx,h.yy,n);for(e=0;e<g.length;e++)p.push(g[e])}return function(t,n){var e={},r=n||Md;return t.filter((function(t){return!((t=r(t))in e)&&(e[t]=!0)}))}(p,n.unique?Ld:null)}function Md(t){return t.a.join(",")+";"+t.b.join(",")}function Ld(){}function Jd(t,n,e,r){var i,o,a,u=t.length-2,f=[];r=(r||{}).tolerance;var c=0;for(i=t.length;c<i;c+=2)if(n[t[c]]>n[t[c+1]]){var s=c+1,l=t[c];t[c]=t[s],t[s]=l}for(Sb(n,t,0,t.length-2),o=0;o<u;){c=t[o],i=t[o+1],s=n[c],l=n[i];var h=e[c],p=e[i];for(a=o;a<u;){var g=t[a+=2],d=n[g];if(l<d)break;var y=e[g],m=t[a+1],v=n[m],b=e[m];if(h>=y){if(h>b&&p>y&&p>b)continue}else if(h<b&&p<y&&p<b)continue;c!=g&&c!=m&&i!=g&&i!=m&&(d=W.segmentIntersection(s,h,l,p,d,y,v,b,r))&&(v=[c,i],g=[g,m],f.push(Nd(d,v,g,n,e)),4==d.length&&f.push(Nd(d.slice(2),v,g,n,e)))}o+=2}return f}function Nd(t,n,e,r,i){var o=t[0];return n=Od(o,t=t[1],n[0],n[1],r,i),e=Od(o,t,e[0],e[1],r,i),{x:o,y:t,a:r=n[0]<e[0]?n:e,b:r==n?e:n}}function Od(t,n,e,r,i,o){return i[e]==t&&o[e]==n?[e,e]:i[r]==t&&o[r]==n?[r,r]:e<r?[e,r]:[r,e]}function Pd(t,n){var e=t.getVertexData(),r=0,i=0;for(n=Qd(n,t=t.getRetainedInterval(),e.zz),u.sortOn(n,"z",!0);0<n.length;){var o=n.pop(),a=t,f=e.xx,c=e.yy,s=e.zz,l=o,h=a,p=f,g=c,d=s,y=Rd(l.a,h,p,g,d);if(1==(a=Qd(f=Jd(y=y.concat(Rd(l.b,h,p,g,d)),f,c),a,s)).length){for(a=a[0],s=t,f=e.zz,c=[],l=a.a[0],h=a.a[1],p=a.z,g=l+1;g<=h;g++)f[g]!=p&&g!=h||(c.push({a:[l,g],b:a.b,z:p}),g!=h&&(f[g]=s),l=g);2>c.length&&S("Error in unwindIntersection()"),a=c,r++}for(s=0;s<a.length;s++){for(f=n,c=a[s],l=f.length;0<l&&!(f[l-1].z<=c.z);)f[l]=f[l-1],l--;f[l]=c}}return 5e5<++i?(U("Caught an infinite loop at intersection:",o),0):r}function Qd(t,n,e){return t.reduce((function(t,r){var i=hd(e,n,r.a[0],r.a[1]),o=hd(e,n,r.b[0],r.b[1]);return null!==(r=-1==i&&-1==o?null:-1==o||-1!=i&&e[i]>e[o]?{a:r.a,b:r.b,z:e[i]}:{a:r.b,b:r.a,z:e[o]})&&t.push(r),t}),[])}function Rd(t,n,e,r,i){if(r=[],t[0]<=t[1]){var o=t[0];t=t[1]}else o=t[1],t=t[0];var a=o;for(o+=1;o<=t;o++)i[o]>=n&&(e[a]<e[o]?r.push(a,o):r.push(o,a),a=o);return r}function Sd(t){function n(t){for(var n=r(t);n>t;){var i=n,a=o[t];e(t,o[i]),e(i,a),n=r(t=n)}}function e(t,n){a[n]=t,o[t]=n}function r(t){var n=2*t+1,e=n+1,r=l;return n<r&&s(t,n)&&(t=n),e<r&&s(t,e)&&(t=e),t}var i,o,a,f=u.expandoBuffer(Int32Array),c=u.expandoBuffer(Int32Array),s="max"==t?function(){}:function(t,n){t=o[t],n=o[n];var e=i[t],r=i[n];return e>r||e===r&&t>n},l=0;this.init=function(t){for(i=t,l=t.length,o=f(l),a=c(l),t=0;t<l;t++)e(t,t);for(t=l-2>>1;0<=t;t--)n(t)},this.size=function(){return l},this.updateValue=function(t,r){var u=a[t];for(i[t]=r,0<=u&&u<l||S("Out-of-range heap index."),t=u;0<t&&!s(t,r=t-1>>1);){u=r;var f=o[t];e(t,o[u]),e(u,f),t=r}n(t)},this.popValue=function(){},this.getValue=function(){},this.peek=function(){},this.peekValue=function(){},this.pop=function(){0>=l&&S("Tried to pop from an empty heap.");var t=o[0];return e(0,o[--l]),n(0),t}}function Xd(t,n,e){var r=t.getBounds().toArray();!0!==W.containsBounds(n,r)&&t.forEach3((function(){}))}function Yd(){}function ae(){}function ee(){}function fe(){}function he(){}function ke(t){if(u.isArray(t))var n=t;else if(n=[],u.isInteger(t))for(var e=0;e<t;e++)n.push({});else t&&S("Invalid DataTable constructor argument:",t);this.getRecords=function(){return n},this.getReadOnlyRecordAt=function(){}}function le(t){return("polygon"==t.geometry_type||"polyline"==t.geometry_type)&&me(t)}function ne(){}function me(t){return u.some(t.shapes||[],(function(t){return!!t}))}function qe(){}function re(t,n){this._n=this._i=0,this._inc=1,this._xx=t,this._yy=n,this.y=this.x=this.i=0}function se(t,n,e){var r=0,i=0,o=1,a=0;this.init=function(t,n,e,u){return r=u||0,e?(i=t,o=1,a=t+n):(i=t+n-1,o=-1,a=t-1),this},this.hasNext=function(){var u=i,f=u,c=r,s=a,l=o;if(u==s)return!1;do{f+=l}while(f!=s&&e[f]<c);return i=f,this.x=t[u],this.y=n[u],this.i=u,!0}}function te(t){this._arcs=t,this.y=this.x=this._n=this._i=0}function ue(){function t(t,n,r){var u=t.length;for(t instanceof Array&&(t=new Uint32Array(t)),n instanceof Array&&(n=new Float64Array(n)),r instanceof Array&&(r=new Float64Array(r)),i=n,o=r,f=t,c=null,g=0,p=null,a=new Uint32Array(u),r=n=0;r<u;r++)a[r]=n,n+=t[r];return n==i.length&&i.length==o.length||S("ArcCollection#initXYData() Counting error"),e(),h=new re(i,o),this}function n(t){t?(t.length!=i.length&&S("ArcCollection#initZData() mismatched arrays"),t instanceof Array&&(t=new Float64Array(t)),p=new se(i,o,c=t)):(c=null,g=0,p=null)}function e(){for(var t,n,e,r=i,a=o,u=f,c=u.length,h=new Float64Array(4*c),p=new V,g=0,d=0;d<c;d++)if(0<(t=u[d])){n=4*d;var y=e=void 0,m=void 0,v=void 0,b=r,x=a,A=t,S=0|g,w=isNaN(A)?b.length-S:A+S;for(0<w&&(v=y=b[S],m=e=x[S]),S++;S<w;S++){var P=b[S];P<v&&(v=P),P>y&&(y=P),(A=x[S])<m&&(m=A),A>e&&(e=A)}e=[v,m,y,e],h[n++]=e[0],h[n++]=e[1],h[n++]=e[2],h[n]=e[3],g+=t,p.mergeBounds(e)}s=h,l=p}function r(){var t=c,n=g;if(!t||!n)return this.getPointCount();for(var e=0,r=0,i=t.length;r<i;r++)t[r]>=n&&e++;return e}var i,o,a,f,c,s,l,h,p,g=0;1==arguments.length||(3==arguments.length?t.apply(this,arguments):S("ArcCollection() Invalid arguments")),this.updateVertexData=function(){},this.getVertexData=function(){return{xx:i,yy:o,zz:c,bb:s,nn:f,ii:a}},this.getCopy=function(){},this.getFilteredCopy=function(){},this.toArray=function(){},this.toJSON=function(){},this.forEachArcSegment=function(t,n){var e=0<=t,r=e?t:~t;t=this.getRetainedInterval();var u=f[r],s=e?1:-1;r=e=e?a[r]:a[r]+u-1;for(var l=i,h=o,p=c,g=0,d=1;d<u;d++)r+=s,(0===t||p[r]>=t)&&(n(e,r,l,h),e=r,g++);return g},this.forEachSegment=function(t){for(var n=0,e=0,r=this.size();e<r;e++)n+=this.forEachArcSegment(e,t);return n},this.transformPoints=function(){},this.forEach=function(){},this.forEach2=function(){},this.forEach3=function(t){for(var n,e,r,u,s,l=0,h=this.size();l<h;l++)e=(n=a[l])+f[l],r=i.subarray(n,e),u=o.subarray(n,e),c&&(s=c.subarray(n,e)),t(r,u,s,l)},this.filter=function(){},this.deleteArcs=function(){},this.dedupCoords=function(){for(var e,r,a=0,u=0,s=0,l=this.size(),h=c;a<l;){for(var p,g,d,y=void 0,m=u,v=s,b=e=f[a],x=i,A=o,S=h,w=0,P=0;w<b;)d=x[p=m+w],g=A[p],(r=d==d&&g==g&&(0===P||d!=x[p-1]||g!=A[p-1]))&&(x[y=v+P]=d,A[y]=g,P++),S&&0<P&&(r||S[p]>S[y])&&(S[y]=S[p]),w++;r=1<P?P:0,f[a]=r,u+=e,s+=r,a++}return u>s&&(t(f,i.subarray(0,s),o.subarray(0,s)),h&&n(h.subarray(0,s))),u-s},this.getVertex=function(){},this.indexOfVertex=function(){},this.arcIsClosed=function(){},this.arcIsLollipop=function(){},this.arcIsDegenerate=function(t){t=this.getArcIter(t);for(var n,e,r=0;t.hasNext();){if(0<r&&(n!=t.x||e!=t.y))return!1;n=t.x,e=t.y,r++}return!0},this.getArcLength=function(){},this.getArcIter=function(t){var n=0<=t,e=n?t:~t,r=c&&g?p:h;return e>=f.length&&S("#getArcId() out-of-range arc id:",t),r.init(a[e],f[e],n,g)},this.getShapeIter=function(t){return new te(this).init(t)},this.setThresholds=function(t){var e=this.getPointCount(),r=null;return t&&(t.length==e?r=t:t.length==this.size()?r=void 0:S("Invalid threshold data")),n(r),this},this.flatten=function(){},this.getRetainedInterval=function(){return g},this.setRetainedInterval=function(t){return g=t,this},this.getRetainedPct=function(){},this.setRetainedPct=function(t){if(1<=t)g=0;else{var n=g=this.getThresholdByPct(t);0>=t?n=1/0:1<=t&&(n=0),g=n}return this},this.getRemovableThresholds=function(t){c||S("[arcs] Missing simplification data."),t|=1;for(var n,e=new Float64Array(Math.ceil(c.length/t)),r=0,i=0,o=this.getPointCount();r<o;r+=t)1/0!=(n=c[r])&&(e[i++]=n);return e.subarray(0,i)},this.getArcThresholds=function(){},this.getPctByThreshold=function(){},this.getThresholdByPct=function(t,n){var e=(n=this.getRemovableThresholds(n)).length;return 1>(t=0===e||1<=t?0:0>=t?e+1:Math.floor((1-t)*(e+2)))?0:t>n.length?1/0:u.findValueByRank(n,t)},this.arcIntersectsBBox=function(){},this.arcIsContained=function(){},this.arcIsSmaller=function(){},this.isPlanar=function(){return!Ed(this.getBounds())},this.size=function(){return a&&a.length||0},this.getPointCount=function(){return i&&i.length||0},this.getFilteredPointCount=r,this.getBounds=function(){return l.clone()},this.getSimpleShapeBounds=function(t,n){n=n||new V;for(var e=0,r=t.length;e<r;e++)this.mergeArcBounds(t[e],n);return n},this.getSimpleShapeBounds2=function(){},this.getMultiShapeBounds=function(){},this.mergeArcBounds=function(t,n){0>t&&(t=~t),t*=4,n.mergeBounds(s[t],s[t+1],s[t+2],s[t+3])}}function Ae(){}function Be(){}function Fe(t,n,e){return function(t,n){if(!t)return null;u.isArray(t)||S("Expected an array, received:",t);for(var e,r=0,i=t.length,o=0;o<i;o++)null===(e=n(t[o],o,t))?(r++,t[o]=null):u.isArray(e)&&(t[o]=e);return r==i?null:0<r?t.filter((function(){})):t}(t,(function(t){return t=function(t,n){for(var e=0,r=0,i=t.length;r<i;r++)n.arcIsDegenerate(t[r])&&(e++,t[r]=null);return 0<e?t.filter((function(){})):t}(t,n),"polygon"==e&&t&&(He(t),0===W.getPlanarPathArea(t,n)&&(t=null)),t}))}function He(t){var n=t.length;if(2<=n){if(t[0]==~t[n-1])t.pop(),t.shift();else for(var e=1;e<n;e++)if(t[e-1]==~t[e]){t.splice(e-1,2);break}t.length<n&&He(t)}}function Ie(){}function Ke(){}function Le(t){var n=1e4,e=new Float64Array(n),r=new Float64Array(n),i=0;this.endPath=function(){t(e,r,i),i=0},this.addPoint=function(t,o){i>=n&&(n=Math.ceil(1.3*n),e=u.extendBuffer(e,n),r=u.extendBuffer(r,n)),e[i]=t,r[i]=o,i++}}function Me(t){function n(t){t>r.length&&(t=Math.max(t,Math.ceil(1.5*r.length)),r=u.extendBuffer(r,t,g),i=u.extendBuffer(i,t,g))}var e=0<t.reserved_points?t.reserved_points:2e4,r=new Float64Array(e),i=new Float64Array(e),o=[],a=[],f=[],c=[],s=t.type||null,l=null,h=-1,p=-1,g=0,d=0,y=0;t.precision&&(l=Ie(t.precision)),u.extend(this,new Le((function(t,e,a){var u=0;n(g+a);for(var c=0;c<a;c++){var m=t[c],v=e[c];l&&(m=l(m),v=l(v)),0<c&&m==x&&v==b?d++:(r[g]=m,i[g]=v,g++,u++);var b=v,x=m}"polygon"==s&&0<u&&(t[0]!=t[a-1]||e[0]!=e[a-1])&&(n(g+1),r[g]=t[0],i[g]=e[0],y++,g++,u++),h++,f[h]=u,function(t){(o[p]||(o[p]=[])).push(t)}([h])}))),this.startShape=function(t){o[++p]=null,t&&(a[p]=t)},this.importLine=function(){},this.importPoints=function(){},this.importRing=function(t,n){var e=W.getPlanarPathArea2(t);!e||4>t.length?U("Skipping a defective ring"):(function(t){var n=p<c.length?c[p]:null;n?n!=t&&T("Unable to import mixed-geometry GeoJSON features"):(c[p]=t,s?t!=s&&(s="mixed"):s=t)}("polygon"),(!0===n&&0<e||!1===n&&0>e)&&t.reverse(),this.importPath(t))},this.importPath=function(t){for(var n,e=0,r=t.length;e<r;e++)n=t[e],this.addPoint(n[0],n[1]);this.endPath()},this.done=function(){var t={name:""};if(0<d&&U(u.format("Removed %,d duplicate point%s",d,u.pluralSuffix(d))),0<y&&Oc(u.format("Closed %,d open polygon ring%s",y,u.pluralSuffix(y))),0<g){g<r.length&&(r=r.subarray(0,g),i=i.subarray(0,g));var n=new ue(f,r,i)}return"mixed"==s?t=void 0:(t={geometry_type:s},s&&(t.shapes=o),0<a.length&&(t.data=new ke(a)),t=[t]),t.forEach((function(t){if(t.data){var n,e,r=function(t){var n,e,r={};for(n=0;n<t.length;n++){var i=Object.keys(t[n]||{});for(e=0;e<i.length;e++)r[i[e]]=1+(0|r[i[e]])}return Object.keys(r).filter((function(n){return r[n]<t.length}))}(t=t.data.getRecords());for(n=0;n<t.length;n++){var i=t[n]||(t[n]={});for(e=0;e<r.length;e++){var o=r[e];0==o in i&&(i[o]=void 0)}}}})),{arcs:n||null,info:{},layers:t}}}function Ne(t){var n=t.id_field||Z.ID_FIELD,e=new Me(t);this.parseObject=function(r){if(r&&r.type)if("Feature"==r.type){var i=r.geometry,o=r.properties||{};"id"in r&&(o[n]=r.id)}else i=r;else i=null;e.startShape(o),i&&Z.importGeometry(i,e,t)},this.done=function(){return e.done()}}function Re(t,n,e){if("point"!=e){var r=0,i=new V,o=[];return!t||"polyline"!=e&&"polygon"!=e||t.forEach((function(t){for(var a,u,f,c,s=n.getShapeIter(t),l=[],h=0;s.hasNext();)a=s.x,u=s.y,0!==h&&f==a&&c==u||(l.push([a,u]),h++),f=a,c=u;s={points:l,pointCount:l.length},l=!0,s.ids=t,"polygon"==e?(s.area=W.getPlanarPathArea2(s.points),l=3<s.pointCount&&0!==s.area):"polyline"==e&&(l=1<s.pointCount),l?(r+=s.pointCount,s.bounds=W.getPathBounds(s.points),i.mergeBounds(s.bounds),o.push(s)):U("Skipping a collapsed",e,"path")})),{pointCount:r,pathData:o,pathCount:o.length,bounds:i}}}function Se(){}function df(t,n,e){var r,i={},o=t.layers,a=function(t,n){var e=n.geojson_type||"";return"Feature"==e||"FeatureCollection"==e||"GeometryCollection"!=e&&(e&&T("Unsupported GeoJSON type:",n.geojson_type),u.some(t,(function(t){var e=t.data?t.data.getFields():[];return t=hf(e,n),e=!!jf(e,n),t||e})))}(o,n);return i.type=a?"FeatureCollection":"GeometryCollection",n.gj2008,n.bbox&&(r=void(n.rfc7946||n.v2))&&(i.bbox=r),o=o.reduce((function(r,i){return i=function(t,n,e,r,i){var o=function(t,n){var e=t?t.getFields():[],r=jf(e,n);return hf(e,n)?(t=t.getRecords(),r==Z.ID_FIELD?t.map((function(){})):t):null}(t.data,e),a=t.shapes,u=function(t,n){return jf(t?t.getFields():[],n)?t.getRecords().map((function(){})):null}(t.data,e),f=e.ndjson?Se:e.prettify?void 0:JSON.stringify;return o&&a&&o.length!==a.length&&S("Mismatch between number of properties and number of shapes"),(a||o||[]).reduce((function(c,s,l){s=a?a[l]:null;var h,p=Z.exporters[t.geometry_type];if(s=s?p(s,n.arcs,e):null,r)s={type:"Feature",geometry:s,properties:o?o[l]:null},u&&(s.id=u[l]);else if(!s)return c;return i&&(s=f(s),"buffer"==i)&&(l=s,/^utf-?8$/i.test("utf8")&&(h=We(l)),s=h),c.push(s),c}),[])}(i,t,n,a,e),0<r.length?r.concat(i):i}),[]),"Feature"==n.geojson_type&&1==o.length?o[0]:n.ndjson?Z.formatCollectionAsNDJSON(o):e?Z.formatCollection(i,o):(i[gf(i.type)]=o,i)}function gf(t){return"FeatureCollection"==t?"features":"GeometryCollection"==t?"geometries":void S("Invalid collection type:",t)}function hf(t,n){return!(n.drop_table||n.cut_table||0===t.length||1==t.length&&t[0]==Z.ID_FIELD)}function jf(t,n){var e=[];return n=n.id_field,u.isString(n)?e.push(n):u.isArray(n)&&(e=n),e.push(Z.ID_FIELD),u.find(e,(function(n){return u.contains(t,n)}))}function cleanPathsAfterImport(t,n){var e,r=t.arcs;(n.snap||n.auto_snap||n.snap_interval)&&(n.snap_interval&&(n.snap_interval,e=void Be(t)),r&&vd(r,e)),t.layers.forEach((function(t){if(le(t)){var n=t.shapes;t=t.geometry_type;for(var e=0,i=n.length;e<i;e++)n[e]=Fe(n[e],r,t)}}))}function exportGeoJSON(t,n){var e,r=(n=n||{}).extension||"json";return(n.precision||n.rfc7946)&&(t=void 0,n.precision),(n.v2||n.rfc7946)&&(e=void 0)&&Oc(e),n.file&&(r=(void n.file).extension),(n.combine_layers?[t.layers]:t.layers.map((function(t){return[t]}))).map((function(e){var i=function(t){return t.reduce((function(t,n){return null===t?t=n.name||null:t&&n.name&&(t=u.mergeNames(t,n.name)),t}),null)||""}(e)||"output";return{content:df(e=u.defaults({layers:e},t),n,"buffer"),filename:i+"."+r}}))}function importGeoJSON(t,n){var e=n||{};return n=Object.keys(Z.pathImporters),t=u.isString(t)?JSON.parse(t):t,e=new Ne(e),((n="Feature"==t.type?{type:"FeatureCollection",features:[t]}:n.includes(t.type)?{type:"GeometryCollection",geometries:[t]}:t).features||n.geometries||[]).forEach(e.parseObject),n=e.done(),"crs"in t&&(n.info.input_geojson_crs=t.crs),n}function simplify(t,n){var e=t.arcs;if(e&&0!==e.size()){n=n||{};var r=n=u.defaults({method:"weighted_visvalingam",spherical:!n.planar&&!t.arcs.isPlanar()},n),i=Y.getWeightedSimplifier(r,r.spherical);if(e.setThresholds(new Float64Array(e.getPointCount())),r.spherical&&(function(t,n){var e=u.expandoBuffer(Float64Array),r=u.expandoBuffer(Float64Array),i=u.expandoBuffer(Float64Array);t.forEach3((function(t,o,a){var u=t.length,f=e(u),c=r(u);u=i(u),W.convLngLatToSph(t,o,f,c,u),n(a,f,c,u)}))}(e,i),Xd(e,Dd(1e-12),!1)),r.lock_box&&((r=e.getBounds()).padBounds(-1e-14,-1e-14,-1e-14,-1e-14),Xd(e,r.toArray(),!0)),n.percentage||0===n.percentage)e.setRetainedPct(u.parsePercent(n.percentage));else if(!n.interval&&0!==n.interval&&!n.resolution&&n.presimplify)return;if(e=t.arcs,n.keep_shapes&&function(t,n){n.forEach((function(n){"polygon"==n.geometry_type&&function(t,n){n.forEach((function(n){for(var e,r,i=0,o=n?n.length:0,a=0;a<o;a++)(r=t.getSimpleShapeBounds(n[a]).area())>i&&(e=n[a],i=r);if(e&&0!==e.length){for(n=e,i=t.getRetainedInterval(),t.setRetainedInterval(1/0),o=W.getPlanarPathArea(n,t);1e-10>=o;){var u=void 0,f=n;e=0;for(var c=t.getVertexData(),s=0;s<f.length;s++)0>(a=f[s])&&(a=~a),r=(o=c.ii[a])+c.nn[a]-1,-1!=(o=hd(c.zz,1/0,o,r))&&(o=c.zz[o])>e&&(e=o,u=a);if(0<e){for(r=(o=c.ii[u])+c.nn[u]-1,a=c.zz,u=0;o<=r;o++)a[o]===e&&(a[o]=1/0,u++);o=u}else o=0;if(0===o){U("[protectMultiRing()] Failed on ring:",n);break}o=W.getPlanarPathArea(n,t)}t.setRetainedInterval(i)}else U("[protectShape()] Invalid shape:",n)}))}(t,n.shapes)}))}(e,t.layers),!n.no_repair&&0<e.getRetainedInterval()){for(t=n=Hd(e);0<Pd(e,t);)t=Hd(e);n=(e=n.length)>(t=t.length)?e-t:0,0<e&&(e=u.format("Repaired %'i intersection%s",n,u.pluralSuffix(n)),0<t&&(e+=u.format("; %'i intersection%s could not be repaired",t,u.pluralSuffix(t))),Oc(e))}}}var aa={},u=Object.freeze({__proto__:null,get a(){},get a(){},get a(){},get a(){},get a(){},get isArray(){return ha},get isNumber(){return ma},get a(){},get isFiniteNumber(){return oa},get a(){},get a(){},get isString(){return ra},get a(){},get a(){},get a(){},get toArray(){return va},get a(){},get a(){},get a(){},get a(){},get defaults(){return Aa},get extend(){return Ba},get a(){},get a(){},get a(){},get a(){},get a(){},get a(){},get contains(){return Ja},get some(){return Ka},get a(){},get find(){return Ma},get a(){},get a(){},get sum(){return Pa},get a(){},get a(){},get a(){},get a(){},get a(){},get a(){},get a(){},get forEach(){return Xa},get a(){},get initializeArray(){return Za},get a(){},get a(){},get pluralSuffix(){return bb},get a(){},get a(){},get a(){},get a(){},get a(){},get a(){},get a(){},get a(){},get a(){},get a(){},get sortOn(){return mb},get a(){},get a(){},get a(){},get a(){},get a(){},get a(){},get a(){},get a(){},get a(){},get a(){},get findValueByRank(){return xb},get a(){},get a(){},get format(){return Ab},get a(){},get a(){},get createBuffer(){return Db},get expandoBuffer(){return Eb},get a(){},get extendBuffer(){return Gb},get a(){},get a(){},get parsePercent(){return Jb},get a(){},get a(){},get a(){},get a(){},get a(){},get a(){},get a(){}}),Tb=Math.PI/180,dc=Object.freeze({__proto__:null,R:6378137,D2R:Tb,R2D:180/Math.PI,degreesToMeters:function(){},distance3D:Ub,distanceSq:y,distance2D:E,distanceSq3D:Vb,innerAngle2:function(){},standardAngle:Wb,signedAngle:function(){},bearing2D:function(){},bearing:Xb,signedAngleSph:function(){},convLngLatToSph:function(t,n,e,r,i){for(var o=[],a=0,u=t.length;a<u;a++)Yb(t[a],n[a],o),e[a]=o[0],r[a]=o[1],i[a]=o[2]},xyzToLngLat:function(){},lngLatToXYZ:Yb,sphericalDistance:Zb,greatCircleDistance:$b,innerAngle:function(){},innerAngle3D:function(){},triangleArea:function(){},cosine:function(){},cosine3D:function(t,n,e,r,i,o,a,u,f){var c=Ub(t,n,e,r,i,o)*Ub(r,i,o,a,u,f),s=0;return 0<c&&(1<(s=((t-r)*(a-r)+(n-i)*(u-i)+(e-o)*(f-o))/c)?s=1:-1>s&&(s=-1)),s},triangleArea3D:function(t,n,e,r,i,o,a,u,f){return.5*Math.sqrt(ac(t,n,r,i,a,u)+ac(t,e,r,o,a,f)+ac(n,e,i,o,u,f))},pointSegDistSq:function(){},pointSegDistSq3D:function(){},pointSegDistSq2:cc,containsBounds:function(t,n){return t[0]<=n[0]&&t[2]>=n[2]&&t[1]<=n[1]&&t[3]>=n[3]}}),F=[],H=[],ec="undefined"!=typeof Uint8Array?Uint8Array:Array,fc=!1,kc={}.toString,lc=Array.isArray||function(){};J.TYPED_ARRAY_SUPPORT=void 0===aa.TYPED_ARRAY_SUPPORT||aa.TYPED_ARRAY_SUPPORT,J.poolSize=8192,J._augment=function(){},J.from=function(t,n,e){return nc(null,t,n,e)},J.TYPED_ARRAY_SUPPORT&&(J.prototype.__proto__=Uint8Array.prototype,J.__proto__=Uint8Array),J.alloc=function(){},J.allocUnsafe=function(t){return mc(null,t)},J.allocUnsafeSlow=function(){},J.isBuffer=function(){},J.compare=function(){},J.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},J.concat=function(t,n){if(!lc(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return J.alloc(0);var e;if(void 0===n)for(e=n=0;e<t.length;++e)n+=t[e].length;n=J.allocUnsafe(n);var r=0;for(e=0;e<t.length;++e){var i=t[e];if(!M(i))throw new TypeError('"list" argument must be an Array of Buffers');i.copy(n,r),r+=i.length}return n},J.byteLength=pc,J.prototype._isBuffer=!0,J.prototype.swap16=function(){},J.prototype.swap32=function(){},J.prototype.swap64=function(){},J.prototype.toString=function(){},J.prototype.equals=function(){},J.prototype.inspect=function(){},J.prototype.compare=function(){},J.prototype.includes=function(){},J.prototype.indexOf=function(){},J.prototype.lastIndexOf=function(){},J.prototype.write=function(t,n,e,r){if(void 0===n)r="utf8",e=this.length,n=0;else if(void 0===e&&"string"==typeof n)r=n,e=this.length,n=0;else{if(!isFinite(n))throw Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");n|=0,isFinite(e)?(e|=0,void 0===r&&(r="utf8")):(r=e,e=void 0)}var i=this.length-n;if((void 0===e||e>i)&&(e=i),0<t.length&&(0>e||0>n)||n>this.length)throw new RangeError("Attempt to write outside buffer bounds");for(r||(r="utf8"),i=!1;;)switch(r){case"hex":t:{if(n=Number(n)||0,r=this.length-n,e?(e=Number(e))>r&&(e=r):e=r,0!=(r=t.length)%2)throw new TypeError("Invalid hex string");for(e>r/2&&(e=r/2),r=0;r<e;++r){if(i=parseInt(t.substr(2*r,2),16),isNaN(i)){t=r;break t}this[n+r]=i}t=r}return t;case"utf8":case"utf-8":return Bc(uc(t,this.length-n),this,n,e);case"ascii":return Bc(Cc(t),this,n,e);case"latin1":case"binary":return Bc(Cc(t),this,n,e);case"base64":return Bc(vc(t),this,n,e);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":r=t,i=this.length-n;for(var o=[],a=0;a<r.length&&!(0>(i-=2));++a){var u=r.charCodeAt(a);t=u>>8,u%=256,o.push(u),o.push(t)}return Bc(o,this,n,e);default:if(i)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),i=!0}},J.prototype.toJSON=function(){};var Dc=4096;J.prototype.slice=function(){},J.prototype.readUIntLE=function(){},J.prototype.readUIntBE=function(){},J.prototype.readUInt8=function(){},J.prototype.readUInt16LE=function(){},J.prototype.readUInt16BE=function(){},J.prototype.readUInt32LE=function(){},J.prototype.readUInt32BE=function(){},J.prototype.readIntLE=function(){},J.prototype.readIntBE=function(){},J.prototype.readInt8=function(){},J.prototype.readInt16LE=function(){},J.prototype.readInt16BE=function(){},J.prototype.readInt32LE=function(){},J.prototype.readInt32BE=function(){},J.prototype.readFloatLE=function(){},J.prototype.readFloatBE=function(){},J.prototype.readDoubleLE=function(){},J.prototype.readDoubleBE=function(){},J.prototype.writeUIntLE=function(){},J.prototype.writeUIntBE=function(){},J.prototype.writeUInt8=function(){},J.prototype.writeUInt16LE=function(){},J.prototype.writeUInt16BE=function(){},J.prototype.writeUInt32LE=function(){},J.prototype.writeUInt32BE=function(){},J.prototype.writeIntLE=function(){},J.prototype.writeIntBE=function(){},J.prototype.writeInt8=function(){},J.prototype.writeInt16LE=function(){},J.prototype.writeInt16BE=function(){},J.prototype.writeInt32LE=function(){},J.prototype.writeInt32BE=function(){},J.prototype.writeFloatLE=function(){},J.prototype.writeFloatBE=function(){},J.prototype.writeDoubleLE=function(){},J.prototype.writeDoubleBE=function(){},J.prototype.copy=function(t,n,e,r){if(e||(e=0),r||0===r||(r=this.length),n>=t.length&&(n=t.length),n||(n=0),0<r&&r<e&&(r=e),r===e||0===t.length||0===this.length)return 0;if(0>n)throw new RangeError("targetStart out of bounds");if(0>e||e>=this.length)throw new RangeError("sourceStart out of bounds");if(0>r)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),t.length-n<r-e&&(r=t.length-n+e);var i=r-e;if(this===t&&e<n&&n<r)for(r=i-1;0<=r;--r)t[r+n]=this[r+e];else if(1e3>i||!J.TYPED_ARRAY_SUPPORT)for(r=0;r<i;++r)t[r+n]=this[r+e];else Uint8Array.prototype.set.call(t,this.subarray(e,e+i),n);return i},J.prototype.fill=function(){};var $c,Hc=/[^+\/0-9A-Za-z-_]/g,Jc={DEBUG:!1,QUIET:!1,VERBOSE:!1,defs:{},input_files:[]},Pc=0,Qc={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"},Rc=/^\s+/,Sc=/\s+$/;Vc.prototype.isNull=function(){},Vc.prototype.invert=function(){},Vc.prototype.transform=function(){},Vc.prototype.toString=function(){},V.from=function(){},V.prototype.toString=function(){},V.prototype.toArray=function(){return this.hasBounds()?[this.xmin,this.ymin,this.xmax,this.ymax]:[]},V.prototype.hasBounds=function(){return this.xmin<=this.xmax&&this.ymin<=this.ymax},V.prototype.sameBounds=V.prototype.equals=function(){},V.prototype.width=function(){return this.xmax-this.xmin||0},V.prototype.height=function(){return this.ymax-this.ymin||0},V.prototype.area=function(){return this.width()*this.height()||0},V.prototype.empty=function(){},V.prototype.setBounds=function(t,n,e,r){return 1==arguments.length&&(u.isArrayLike(t)?(n=t[1],e=t[2],r=t[3],t=t[0]):(n=t.ymin,e=t.xmax,r=t.ymax,t=t.xmin)),this.xmin=t,this.ymin=n,this.xmax=e,this.ymax=r,(t>e||n>r)&&this.update(),this},V.prototype.centerX=function(){},V.prototype.centerY=function(){},V.prototype.containsPoint=function(){},V.prototype.containsBufferedPoint=V.prototype.containsCircle=function(){},V.prototype.intersects=function(){},V.prototype.contains=function(){},V.prototype.shift=function(){},V.prototype.padBounds=function(){},V.prototype.scale=function(){},V.prototype.cloneBounds=V.prototype.clone=function(){return new V(this.xmin,this.ymin,this.xmax,this.ymax)},V.prototype.clearBounds=function(){},V.prototype.mergePoint=function(t,n){void 0===this.xmin?this.setBounds(t,n,t,n):(t<this.xmin?this.xmin=t:t>this.xmax&&(this.xmax=t),n<this.ymin?this.ymin=n:n>this.ymax&&(this.ymax=n))},V.prototype.fillOut=function(){},V.prototype.update=function(){},V.prototype.transform=function(){},V.prototype.getTransform=function(){},V.prototype.mergeCircle=function(){},V.prototype.mergeBounds=function(t){if(t instanceof V)var n=t.xmin,e=t.ymin,r=t.xmax,i=t.ymax;else 4==arguments.length?(n=arguments[0],e=arguments[1],r=arguments[2],i=arguments[3]):4==t.length?(n=t[0],e=t[1],r=t[2],i=t[3]):S("Bounds#mergeBounds() invalid argument:",t);return void 0===this.xmin?this.setBounds(n,e,r,i):(n<this.xmin&&(this.xmin=n),e<this.ymin&&(this.ymin=e),r>this.xmax&&(this.xmax=r),i>this.ymax&&(this.ymax=i)),this},$c=function(){};var Fd,ad=Object.freeze({__proto__:null,pathIsClosed:function(){},getPointToPathDistance:Wc,getPointToPathInfo:Xc,getPointToShapeDistance:function(){},getAvgPathXY:Yc,getMaxPath:Zc,countVerticesInPath:function(){},getPathBounds:function(t){for(var n=new V,e=0,r=t.length;e<r;e++)n.mergePoint(t[e][0],t[e][1]);return n},get calcPathLen(){return $c}}),cd=Object.freeze({__proto__:null,getShapeCentroid:function(){},getPathCentroid:bd}),ud=Object.freeze({__proto__:null,calcPolsbyPopperCompactness:function(){},calcSchwartzbergCompactness:function(){},getPathWinding:function(){},getShapeArea:function(){},getPlanarShapeArea:function(){},getSphericalShapeArea:function(){},testPointInPolygon:function(){},testPointInRing:kd,testRayIntersection:ld,getRayIntersection:md,getPathArea:nd,getSphericalPathArea:pd,getSphericalPathArea2:qd,getPlanarPathArea2:function(t){for(var n,e,r,i,o,a,u,f=0,c=0,s=t.length;c<s;c++)u=t[c],0===c?(e=n=0,o=-u[0],a=-u[1]):f+=(n=u[0]+o)*i-r*(e=u[1]+a),r=n,i=e;return f/2},getPlanarPathArea:od,getPathPerimeter:rd,getShapePerimeter:function(){},getSphericalShapePerimeter:function(){},getPlanarPathPerimeter:sd,getSphericalPathPerimeter:td}),Cd=Object.freeze({__proto__:null,segmentIntersection:function(t,n,e,r,i,o,a,u,f){var c,s=0<=f?f:1e-14*Math.max.apply(null,[t,n,e,r,i,o,a,u].map(Math.abs)),l=s*s;if(xd(f=[],l,t,n,i,o,a,u),xd(f,l,e,r,i,o,a,u),xd(f,l,i,o,t,n,e,r),xd(f,l,a,u,t,n,e,r),(c=!(f=0===f.length?null:f))&&(c=y(t,n,i,o)<=l||y(t,n,a,u)<=l||y(e,r,i,o)<=l||y(e,r,a,u)<=l),c)return null;if(Bd(t,n,e,r,i,o,a,u))if(c=(e-t)*(u-o)-(r-n)*(a-i),l=[t+(l=Ad(i,o,a,u,t,n)/c)*(e-t),n+l*(r-n)],1e-18>Math.abs(c))t=null;else{if(0<s){c=l[0];var h=l[1];s=yd(l,s,c,h,t,n),s=yd(l,s,c,h,e,r),s=yd(l,s,c,h,i,o),yd(l,s,c,h,a,u)}s=l[0],c=l[1],s=zd(s,t,e),s=zd(s,i,a),c=zd(c,n,r),c=zd(c,o,u),l[0]=s,l[1]=c,t=l}else t=null;return f||t||null},findClosestPointOnSeg:function(){},orient2D:Ad,segmentHit:Bd}),W=Object.assign({},dc,ud,ad,Cd,cd),Y={getArcCalculator:function(t,n){var e=new Sd,r=u.expandoBuffer(Int32Array),i=u.expandoBuffer(Int32Array),o=n?function(n,e,r,i,o,a){return t(i[n],o[n],a[n],i[e],o[e],a[e],i[r],o[r],a[r])}:function(){};return function(t,a,u,f){var c,s=t.length,l=r(s),h=i(s),p=-1/0;for(f&&!n?S("[visvalingam] Received z-axis data for 2D simplification"):!f&&n?S("[visvalingam] Missing z-axis data for 3D simplification"):t.length>a.length&&S("[visvalingam] Incompatible data arrays:",t.length,a.length),c=0;c<s;c++){var g=c-1,d=c+1,y=0>g||d>=s?1/0:o(g,c,d,a,u,f);t[c]=y,h[c]=d,l[c]=g}for(e.init(t);0<e.size()&&1/0!==(y=t[c=e.pop()]);)y<p?t[c]=p:p=y,g=l[c],d=h[c],0<g&&(y=o(l[g],g,d,a,u,f),e.updateValue(g,y)),d<s-1&&(y=o(g,d,h[d],a,u,f),e.updateValue(d,y)),h[g]=d,l[d]=g}}};Y.standardMetric=W.triangleArea,Y.standardMetric3D=W.triangleArea3D,Y.getWeightedMetric=function(){},Y.getWeightedMetric3D=function(t){var n=Y.getWeightFunction(t);return function(t,e,r,i,o,a,u,f,c){var s=W.triangleArea3D(t,e,r,i,o,a,u,f,c);return t=W.cosine3D(t,e,r,i,o,a,u,f,c),n(t)*s}},Y.getWeightCoefficient=function(t){return t&&u.isNumber(t&&t.weighting)?t.weighting:.7},Y.getWeightFunction=function(t){var n=Y.getWeightCoefficient(t);return function(t){return-t*n+1}},Y.weight=function(){},Y.getEffectiveAreaSimplifier=function(){},Y.getWeightedSimplifier=function(t,n){return t=n?Y.getWeightedMetric3D(t):Y.getWeightedMetric(t),Y.getPathSimplifier(t,n)},Y.getPathSimplifier=function(t,n){return Y.scaledSimplify(Y.getArcCalculator(t,n))},Y.scaledSimplify=function(t){return function(n,e,r,i){for(t(n,e,r,i),e=1,r=n.length-1;e<r;e++)n[e]=.65*Math.sqrt(n[e])}};var Z={ID_FIELD:"FID",typeLookup:{LineString:"polyline",MultiLineString:"polyline",Polygon:"polygon",MultiPolygon:"polygon",Point:"point",MultiPoint:"point"},translateGeoJSONType:function(){},pathIsRing:function(){}};ke.prototype={fieldExists:function(){},toString:function(){},toJSON:function(){},addField:function(){},getRecordAt:function(){},addIdField:function(){},deleteField:function(){},getFields:function(){var t=this.getRecords();t:{for(var n=0,e=t?t.length:0;n<e;n++)if(t[n]){t=t[n];break t}t=null}return function(t,n){return"ascending"==n&&t.sort((function(){})),t}(t=t?Object.keys(t):[],void 0)},isEmpty:function(){},update:function(){},clone:function(){},size:function(){}},re.prototype.init=function(t,n,e){return e?(this._i=t,this._inc=1):(this._i=t+n-1,this._inc=-1),this._n=n,this},re.prototype.hasNext=function(){var t=this._i;return 0<this._n&&(this._i=t+this._inc,this.x=this._xx[t],this.y=this._yy[t],this.i=t,this._n--,!0)},te.prototype.hasNext=function(){var t=this._arc;return 0!=this._i<this._n&&(t.hasNext()?(this.x=t.x,this.y=t.y,!0):(this.nextArc(),this.hasNext()))},te.prototype.init=function(t){return this._ids=t,this._n=t.length,this.reset(),this},te.prototype.nextArc=function(){var t=this._i+1;t<this._n&&(this._arc=this._arcs.getArcIter(this._ids[t]),0<t&&this._arc.hasNext()),this._i=t},te.prototype.reset=function(){this._i=-1,this.nextArc()};var ye={robinson:"+proj=robin +datum=WGS84",webmercator:"+proj=merc +a=6378137 +b=6378137",wgs84:"+proj=longlat +datum=WGS84"},Ce={m:"meters",meter:"meters",meters:"meters",mi:"miles",mile:"miles",miles:"miles",km:"kilometers",ft:"feet",feet:"feet"},De={meters:1,kilometers:1e3,feet:.3048,miles:1609.344};Z.importGeometry=function(t,n,e){var r=t.type;r in Z.pathImporters?e.geometry_type&&e.geometry_type!=Z.translateGeoJSONType(r)||Z.pathImporters[r](t.coordinates,n):"GeometryCollection"==r?t.geometries.forEach((function(){})):U("GeoJSON.importGeometry() Unsupported geometry type:",t.type)},Z.pathImporters={LineString:function(){},MultiLineString:function(){},Polygon:function(t,n){for(var e=0;e<t.length;e++)n.importRing(t[e],0<e)},MultiPolygon:function(t,n){for(var e=0;e<t.length;e++)Z.pathImporters.Polygon(t[e],n)},Point:function(){},MultiPoint:function(){}};var We=function(t){var n=null;return"utf8"!=(t=(t||"").toLowerCase().replace(/[_-]/g,""))?null:("undefined"!=typeof TextEncoder&&(n=new TextEncoder(t)),function(e){return n?J.from(n.encode(e).buffer):u.createBuffer(e,t)})}("utf8");!function(t){"utf8"!=(t=(t||"").toLowerCase().replace(/[_-]/g,""))||"undefined"!=typeof TextDecoder&&new TextDecoder(t)}("utf8"),Z.formatCollectionAsNDJSON=function(){},Z.formatCollection=function(t,n){return t=JSON.stringify(t).replace(/\}$/,', "'+gf(t.type)+'": [\n'),u.isString(n[0])?t+n.join(",\n")+"\n]}":Z.joinOutputBuffers(t,"\n]}",n)},Z.joinOutputBuffers=function(t,n,e){var r=u.createBuffer(",\n","utf8");return(t=e.reduce((function(t,n,e){return 0<e&&t.push(r),t.push(n),t}),[u.createBuffer(t,"utf8")])).push(u.createBuffer(n,"utf8")),J.concat(t)},Z.exportPointGeom=function(){},Z.exportLineGeom=function(){},Z.exportPolygonGeom=function(t,n,e){if(0===(t=Re(t,n,"polygon")).pointCount)return null;n=function(t,n,e){var r=[],i=[],o=e?-1:1;if((t||[]).forEach((function(t){0<t.area*o?i.push([t]):0>t.area*o&&r.push(t)})),0===r.length)return i;i.map((function(){}));return r.forEach((function(){})),i}(t.pathData,0,e.invert_y);var r=(e.rfc7946||e.v2)&&!e.invert_y;return 1==(e=n.map((function(t){return t.map((function(t){return r&&t.points.reverse(),t.points}))}))).length?{type:"Polygon",coordinates:e[0]}:{type:"MultiPolygon",coordinates:e}},Z.exporters={polygon:Z.exportPolygonGeom,polyline:Z.exportLineGeom,point:Z.exportPointGeom};export{cleanPathsAfterImport,exportGeoJSON,importGeoJSON,simplify};